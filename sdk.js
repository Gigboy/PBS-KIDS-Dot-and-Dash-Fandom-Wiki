!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SilverSurferSDK=e():t.SilverSurferSDK=e()}(window,(()=>(()=>{var t={9996:t=>{"use strict";var e=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===n}(t)}(t)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(t,e){return!1!==e.clone&&e.isMergeableObject(t)?s((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function o(t,e,n){return t.concat(e).map((function(t){return r(t,n)}))}function i(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function a(t,e){try{return e in t}catch(t){return!1}}function s(t,n,c){(c=c||{}).arrayMerge=c.arrayMerge||o,c.isMergeableObject=c.isMergeableObject||e,c.cloneUnlessOtherwiseSpecified=r;var u=Array.isArray(n);return u===Array.isArray(t)?u?c.arrayMerge(t,n,c):function(t,e,n){var o={};return n.isMergeableObject(t)&&i(t).forEach((function(e){o[e]=r(t[e],n)})),i(e).forEach((function(i){(function(t,e){return a(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,i)||(a(t,i)&&n.isMergeableObject(e[i])?o[i]=function(t,e){if(!e.customMerge)return s;var n=e.customMerge(t);return"function"==typeof n?n:s}(i,n)(t[i],e[i],n):o[i]=r(e[i],n))})),o}(t,n,c):r(n,c)}s.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return s(t,n,e)}),{})};var c=s;t.exports=c},8668:(t,e,n)=>{var r=n(1469);t.exports=function(){if(!arguments.length)return[];var t=arguments[0];return r(t)?t:[t]}},6384:(t,e,n)=>{var r=n(7040),o=n(4125),i=n(2117),a=n(7518),s=n(4705);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,t.exports=c},7443:(t,e,n)=>{var r=n(2118);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},1196:t=>{t.exports=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},9932:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},2908:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},4865:(t,e,n)=>{var r=n(9465),o=n(7813),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];i.call(t,e)&&o(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},8470:(t,e,n)=>{var r=n(7813);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},9465:(t,e,n)=>{var r=n(8777);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},5990:t=>{t.exports=function(t){return t}},7786:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},4239:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},2118:t=>{t.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},939:(t,e,n)=>{var r=n(2492),o=n(7005);t.exports=function t(e,n,i,a,s){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:r(e,n,i,a,t,s))}},2492:(t,e,n)=>{var r=n(6384),o=n(7114),i=n(8351),a=n(6096),s=n(4160),c=n(1469),u=n(4144),l=n(6719),d="[object Arguments]",f="[object Array]",p="[object Object]",v=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,g,h,y){var b=c(t),m=c(e),w=b?f:s(t),S=m?f:s(e),O=(w=w==d?p:w)==p,_=(S=S==d?p:S)==p,E=w==S;if(E&&u(t)){if(!u(e))return!1;b=!0,O=!1}if(E&&!O)return y||(y=new r),b||l(t)?o(t,e,n,g,h,y):i(t,e,w,n,g,h,y);if(!(1&n)){var I=O&&v.call(t,"__wrapped__"),x=_&&v.call(e,"__wrapped__");if(I||x){var A=I?t.value():t,j=x?e.value():e;return y||(y=new r),h(A,j,n,g,y)}}return!!E&&(y||(y=new r),a(t,e,n,g,h,y))}},7206:t=>{t.exports=function(t){return t}},280:(t,e,n)=>{var r=n(5569)(Object.keys,Object);t.exports=r},9877:t=>{var e=Math.floor,n=Math.random;t.exports=function(t,r){return t+e(n()*(r-t+1))}},4259:t=>{t.exports=function(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}},5652:(t,e,n)=>{var r=n(8668),o=n(7443),i=n(1196),a=n(4757),s=n(3593),c=n(1814);t.exports=function(t,e,n){var u=-1,l=o,d=t.length,f=!0,p=[],v=p;if(n)f=!1,l=i;else if(d>=200){var g=e?null:s(t);if(g)return c(g);f=!1,l=a,v=new r}else v=e?[]:p;t:for(;++u<d;){var h=t[u],y=e?e(h):h;if(h=n||0!==h?h:0,f&&y==y){for(var b=v.length;b--;)if(v[b]===y)continue t;e&&v.push(y),p.push(h)}else l(v,y,n)||(v!==p&&v.push(y),p.push(h))}return p}},7406:(t,e,n)=>{var r=n(1811),o=n(928),i=n(292),a=n(327);t.exports=function(t,e){return e=r(e,t),null==(t=i(t,e))||delete t[a(o(e))]}},4757:(t,e,n)=>{var r=n(2118);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},1811:(t,e,n)=>{var r=n(1469);t.exports=function(){if(!arguments.length)return[];var t=arguments[0];return r(t)?t:[t]}},8363:(t,e,n)=>{var r=n(4865),o=n(9465);t.exports=function(t,e,n,i){var a=!n;n||(n={});for(var s=-1,c=e.length;++s<c;){var u=e[s],l=i?i(n[u],t[u],u,n,t):void 0;void 0===l&&(l=t[u]),a?o(n,u,l):r(n,u,l)}return n}},3593:t=>{t.exports=function(){}},696:(t,e,n)=>{var r=n(8630);t.exports=function(t){return r(t)?void 0:t}},8777:(t,e,n)=>{var r=n(852),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},7114:(t,e,n)=>{var r=n(8668),o=n(2908),i=n(4757);t.exports=function(t,e,n,a,s,c){var u=1&n,l=t.length,d=e.length;if(l!=d&&!(u&&d>l))return!1;var f=c.get(t),p=c.get(e);if(f&&p)return f==e&&p==t;var v=-1,g=!0,h=2&n?new r:void 0;for(c.set(t,e),c.set(e,t);++v<l;){var y=t[v],b=e[v];if(a)var m=u?a(b,y,v,e,t,c):a(y,b,v,t,e,c);if(void 0!==m){if(m)continue;g=!1;break}if(h){if(!o(e,(function(t,e){if(!i(h,e)&&(y===t||s(y,t,n,a,c)))return h.push(e)}))){g=!1;break}}else if(y!==b&&!s(y,b,n,a,c)){g=!1;break}}return c.delete(t),c.delete(e),g}},8351:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},6096:(t,e,n)=>{var r=n(8234),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,i,a,s){var c=1&n,u=r(t),l=u.length;if(l!=r(e).length&&!c)return!1;for(var d=l;d--;){var f=u[d];if(!(c?f in e:o.call(e,f)))return!1}var p=s.get(t),v=s.get(e);if(p&&v)return p==e&&v==t;var g=!0;s.set(t,e),s.set(e,t);for(var h=c;++d<l;){var y=t[f=u[d]],b=e[f];if(i)var m=c?i(b,y,f,e,t,s):i(y,b,f,t,e,s);if(!(void 0===m?y===b||a(y,b,n,i,s):m)){g=!1;break}h||(h="constructor"==f)}if(g&&!h){var w=t.constructor,S=e.constructor;w==S||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof S&&S instanceof S||(g=!1)}return s.delete(t),s.delete(e),g}},9021:t=>{t.exports=function(t){return t}},8234:(t,e,n)=>{var r=n(5569)(Object.keys,Object);t.exports=r},6904:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},852:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},5924:(t,e,n)=>{var r=n(5569)(Object.getPrototypeOf,Object);t.exports=r},4160:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},6612:t=>{t.exports=function(){return!1}},5726:t=>{t.exports=function(){return!1}},7040:t=>{t.exports=function(){this.__data__=[],this.size=0}},4125:(t,e,n)=>{var r=n(8470),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():o.call(e,n,1),--this.size,0))}},2117:(t,e,n)=>{var r=n(8470);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},7518:(t,e,n)=>{var r=n(8470);t.exports=function(t){return r(this.__data__,t)>-1}},4705:(t,e,n)=>{var r=n(8470);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},5569:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},292:t=>{t.exports=function(t){return t}},1814:t=>{t.exports=function(){return[]}},327:t=>{t.exports=function(t){return t}},7813:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},7361:(t,e,n)=>{var r=n(7786);t.exports=function(t,e,n){var o=null==t?void 0:r(t,e);return void 0===o?n:o}},5694:t=>{t.exports=function(){return!1}},1469:t=>{var e=Array.isArray;t.exports=e},8612:(t,e,n)=>{var r=n(3560),o=n(1780);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},4144:t=>{t.exports=function(){return!1}},1609:(t,e,n)=>{var r=n(280),o=n(4160),i=n(5694),a=n(1469),s=n(8612),c=n(4144),u=n(5726),l=n(6719),d=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(s(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||c(t)||l(t)||i(t)))return!t.length;var e=o(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(u(t))return!r(t).length;for(var n in t)if(d.call(t,n))return!1;return!0}},8446:(t,e,n)=>{var r=n(939);t.exports=function(t,e){return r(t,e)}},3560:(t,e,n)=>{var r=n(4239),o=n(3218);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},3218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7005:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},8630:(t,e,n)=>{var r=n(4239),o=n(5924),i=n(7005),a=Function.prototype,s=Object.prototype,c=a.toString,u=s.hasOwnProperty,l=c.call(Object);t.exports=function(t){if(!i(t)||"[object Object]"!=r(t))return!1;var e=o(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==l}},6719:t=>{t.exports=function(){return!1}},928:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},7557:(t,e,n)=>{var r=n(9932),o=n(5990),i=n(7406),a=n(1811),s=n(8363),c=n(696),u=n(9021),l=n(6904),d=u((function(t,e){var n={};if(null==t)return n;var u=!1;e=r(e,(function(e){return e=a(e,t),u||(u=e.length>1),e})),s(t,l(t),n),u&&(n=o(n,7,c));for(var d=e.length;d--;)i(n,e[d]);return n}));t.exports=d},3608:(t,e,n)=>{var r=n(9877),o=n(6612),i=n(8601),a=parseFloat,s=Math.min,c=Math.random;t.exports=function(t,e,n){if(n&&"boolean"!=typeof n&&o(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=i(t),void 0===e?(e=t,t=0):e=i(e)),t>e){var u=t;t=e,e=u}if(n||t%1||e%1){var l=c();return s(t+l*(e-t+a("1e-"+((l+"").length-1))),e)}return r(t,e)}},9579:(t,e,n)=>{var r=n(4259),o=n(554);t.exports=function(t,e,n){var i=null==t?0:t.length;return i?(e=n||void 0===e?1:o(e),r(t,(e=i-e)<0?0:e,i)):[]}},8601:t=>{t.exports=function(t){return t}},554:t=>{t.exports=function(t){return t}},4908:(t,e,n)=>{var r=n(5652);t.exports=function(t){return t&&t.length?r(t):[]}},5578:(t,e,n)=>{var r=n(7206),o=n(5652);t.exports=function(t,e){return t&&t.length?o(t,r(e,2)):[]}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{ACTION:()=>la,addAction:()=>va,addActiveDataAction:()=>pa,addInteraction:()=>ba,default:()=>xa,getActions:()=>ga,getAllActions:()=>ha,getContext:()=>Ia,getGalactusUserProfile:()=>Ea,getUserProfile:()=>ya,getVersionHash:()=>_a,isCrossdomainDisabled:()=>wa,isCrossdomainFinished:()=>ma,isInitialized:()=>Sa,isReady:()=>Oa,registerClient:()=>fa,trackPageview:()=>da});const t=Array.isArray,e=function(){if(!arguments.length)return[];var e=arguments[0];return t(e)?e:[e]},o=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1},i=function(t,e){return!(null==t||!t.length)&&o(t,e,0)>-1},a=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1},s=function(t,e){return!(null==t||!t.length)&&o(t,e,0)>-1},c=function(t,n){return t&&t.length?function(t,n,r){var o=-1,c=i,u=t.length,l=!0,d=[],f=d;if(r)l=!1,c=a;else if(u>=200){if(n?null:void 0)return[];l=!1,c=s,f=new e}else f=n?[]:d;t:for(;++o<u;){var p=t[o],v=n?n(p):p;if(p=r||0!==p?p:0,l&&v==v){for(var g=f.length;g--;)if(f[g]===v)continue t;n&&f.push(v),d.push(p)}else c(f,v,r)||(f!==d&&f.push(v),d.push(p))}return d}(t,n):[]};function u(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){u(i,r,o,a,s,"next",t)}function s(t){u(i,r,o,a,s,"throw",t)}a(void 0)}))}}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var p,v,g=function(t,e){return function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new j(r||[]);return i._invoke=function(t,e,n){var r=d;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===v){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=I(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=l(t,e,n);if("normal"===c.type){if(r=n.done?v:f,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=v,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",v="completed",g={};function h(){}function y(){}function b(){}var m={};c(m,i,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(D([])));S&&S!==n&&r.call(S,i)&&(m=S);var O=b.prototype=h.prototype=Object.create(m);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function I(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=l(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function D(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:e,done:!0}}return y.prototype=b,c(O,"constructor",b),c(b,"constructor",y),y.displayName=c(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},_(E.prototype),c(E.prototype,a,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new E(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(O),c(O,s,"Generator"),c(O,i,(function(){return this})),c(O,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=D,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(e={exports:{}}),e.exports}(),h=function(){function t(){this.id=t.UNKNOWN_USER,this.language=void 0}var e=t.prototype;return e.reset=function(){this.id=t.UNKNOWN_USER,this.language=void 0},t.getDefault=function(){return new t},t.getAnon=function(){var e=new t;return e.id=t.ANON_USER,e},e.apply=function(e){return e instanceof t&&(this.id=e.id,null!=e&&e.language&&(this.language=e.language)),this},t.fromContext=function(e){return t.getDefault().apply(e)},t.fromTransport=function(e){var n=t.getDefault();if("object"==typeof e&&null!=e&&e.id){var r=e.id;"number"==typeof r?n.id=r:"string"==typeof r&&(n.id=parseInt(r,10)),n.language=null==e?void 0:e.lang}return n},t.fromWindow=function(){var e=window;return null!=e&&e._ulc&&"object"==typeof e._ulc?t.fromTransport(e._ulc):t.getDefault()},e.toTransport=function(){return{id:this.id,lang:this.language}},e.toString=function(){return JSON.stringify(this.toTransport())},e.updateWindow=function(){window._ulc=this.toTransport()},e.toScript=function(){return"window._ulc = "+this.toString()+";"},f(t,[{key:"lang",get:function(){return null==this?void 0:this.language}},{key:"isUnknown",get:function(){return this.id===t.UNKNOWN_USER}},{key:"isAnon",get:function(){return this.isUnknown||this.id===t.ANON_USER}},{key:"anon",get:function(){return this.isAnon}}]),t}();h.UNKNOWN_USER=-1,h.ANON_USER=0,function(t){t.UNKNOWN="unknown",t.MEDIAWIKI="mw",t.DISCUSSIONS="dis",t.TRIVIA="trivia",t.F2="f2",t.FANHUB="fanhub",t.VIDEO="video"}(v||(v={}));var y,b,m,w=((p={})[v.MEDIAWIKI]=!0,p[v.DISCUSSIONS]=!0,p[v.TRIVIA]=!0,p[v.F2]=!0,p[v.FANHUB]=!0,p[v.VIDEO]=!0,p),S=function(){function t(){this.$time=0,this.product=v.UNKNOWN,this.productId=void 0,this.$time=Date.now()}var e=t.prototype;return e.reset=function(){this.product=v.UNKNOWN,this.productId=void 0,this.productVariant=void 0,this.productCategory=void 0,this.page=void 0,this.pageId=void 0,this.pageLanguage=void 0,this.adTags=void 0,this.$time=Date.now()},t.getDefault=function(){return new t},e.zeroTime=function(){return this.$time=0,this},e.apply=function(e){return e instanceof t&&(e.isUnknown||(this.product=e.product),null!=e&&e.productId&&"string"==typeof e.productId&&e.productId.length>0&&(this.productId=e.productId),null!=e&&e.productVariant&&(this.productVariant=e.productVariant),null!=e&&e.productCategory&&(this.productCategory=e.productCategory),null!=e&&e.page&&(this.page=e.page),null!=e&&e.pageId&&(this.pageId=e.pageId),null!=e&&e.pageLanguage&&(this.pageLanguage=e.pageLanguage),null!=e&&e.adTags&&(this.adTags=e.adTags),null!=e&&e.$time&&"number"==typeof e.$time&&e.$time>0&&(this.$time=e.$time)),this},t.fromContext=function(e){return t.getDefault().apply(e)},t.fromTransport=function(e){var n=t.getDefault();return e.p&&e.pId&&"number"==typeof e.time&&(n.product=e.p,n.productId=e.pId,n.productVariant=null==e?void 0:e.pVar,n.productCategory=null==e?void 0:e.pCat,n.page=null==e?void 0:e.pg,n.pageId=null==e?void 0:e.pgId,n.pageLanguage=null==e?void 0:e.pgLang,n.adTags=null==e?void 0:e.adTags,n.$time=e.time>0?e.time:Date.now()),n},t.fromWindow=function(){var e=window;return null!=e&&e._plc&&"object"==typeof e._plc?t.fromTransport(e._plc):t.getDefault()},e.toTransport=function(t){void 0===t&&(t=!1);var e={p:this.product,pId:this.productId,pVar:null==this?void 0:this.productVariant,pCat:null==this?void 0:this.productCategory,pg:null==this?void 0:this.page,pgId:null==this?void 0:this.pageId,pgLang:null==this?void 0:this.pageLanguage,adTags:null==this?void 0:this.adTags,time:this.time};return t&&(e.time=0),e},e.toString=function(t){return void 0===t&&(t=!1),JSON.stringify(this.toTransport(t))},e.updateWindow=function(t){void 0===t&&(t=!1);var e=window;e._plc=this.toTransport(t),t&&(e._plc.time=Date.now())},e.toScript=function(t){void 0===t&&(t=!1);var e="window._plc = "+this.toString(t)+";";return t&&(e+="window._plc.time = Date.now();"),e},f(t,[{key:"time",get:function(){return this.$time}},{key:"isUnknown",get:function(){return"string"!=typeof this.product||!w[this.product]}},{key:"isValid",get:function(){return!this.isUnknown&&"string"==typeof this.productId&&this.$time>0}}]),t}();function O(t,e,n){return void 0===e&&(e="/"),void 0===n&&(n={}),fetch(function(t){var e,n,r=null==(e=window)||null==(n=e.location)?void 0:n.hostname;if(r){if(r.endsWith("fandom.com"))return"https://services.fandom.com/"+t;if(r.endsWith("fandom-dev.us"))return"https://services.fandom-dev.us/"+t}return"http://"+t}(t)+e,n).then((function(n){return"opaque"===n.type||n.ok||401===n.status||404===n.status||console.error("fetch Error",{serviceName:t,path:e,response:n}),n.json()}))}function _(){return E.apply(this,arguments)}function E(){return(E=l(g.mark((function t(){var e,n,r;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O("whoami","/",{credentials:"include"});case 3:return n=t.sent,r=null!=(e=null==n?void 0:n.userId)?e:""+h.ANON_USER,t.abrupt("return",parseInt(r,10));case 8:t.prev=8,t.t0=t.catch(0);case 10:return t.abrupt("return",h.ANON_USER);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function I(){return(I=l(g.mark((function t(){var e;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=h.fromWindow()).isUnknown){t.next=12;break}return t.prev=2,t.next=5,_();case 5:e.id=t.sent,t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(2),console.debug("Failed, falling back to default user context",t.t0),t.abrupt("return",h.getDefault());case 12:return t.abrupt("return",e);case 13:case"end":return t.stop()}}),t,null,[[2,8]])})))).apply(this,arguments)}function x(t){if("object"!=typeof t)return{};for(var e={},n=0,r=Object.entries(t);n<r.length;n++){var o=r[n],i=o[0],a=o[1];a&&(e[i]=a.reduce((function(t,e){return t[e]=1,t}),{}))}return e}function A(t){var e=document.cookie.match(RegExp("(?:^|;\\s*)"+function(t){return t.replace(/([.*+?\^$(){}|\[\]\/\\])/g,"\\$1")}(t)+"=([^;]*)"));return e?e[1]:void 0}function j(){return A("wikia_beacon_id")||""}function D(){return S.fromWindow()}function k(){return h.fromWindow()}!function(t){t.INIT="roots-initial",t.LOADED="roots-loaded"}(y||(y={})),function(t){t.SS_PRE_BOOTSTRAP="ss_pre_bootstrap",t.SS_SDK_START="ss_sdk_start",t.SS_SDK_LOADED="ss_sdk_loaded",t.SS_SDK_READY="ss_sdk_ready",t.SS_CROSS_DOMAIN_READY="ss_cross_domain_ready",t.SS_CROSS_DOMAIN_REGISTER_START="ss_cross_domain_register_start",t.SS_CROSS_DOMAIN_REGISTER_ALL_PAGES_DONE="ss_cross_domain_register_all_pages_done"}(b||(b={})),function(t){t.PF_START="pf_start",t.PF_LOADED="pf_loaded",t.PF_READY="pf_ready"}(m||(m={}));const P=Object.values({SilverSurfer:"silversurfer",PathfinderExperiments:"pf-experiments",ClientSide:"browser-client-",Custom:"custom-"});var C,R;!function(t){t.CATEGORY="category",t.EVENT="event",t.LABEL="label",t.ACTION="action",t.VALUE="value",t.NON_INTERACTIVE="nonInteractive",t.IS_DEBUG="isDebug"}(C||(C={})),function(t){t.EXPERIMENT_VARIANT="experimentVariant",t.SS_VERSION="silverSurferVersion",t.AD_PVUID="pvUID",t.BEACON_ID="beaconId"}(R||(R={}));const N=[...Object.values(R),...Object.values(C)];function T(){var t,e,n;return null!==(n=null===(e=null===(t=null===window||void 0===window?void 0:window.google_tag_manager)||void 0===t?void 0:t.dataLayer)||void 0===e?void 0:e.gtmDom)&&void 0!==n&&n}function L(){T()&&(window.__datalayer_pre=window.__datalayer_pre||[],window.__datalayer_pre.length>0&&(window.__datalayer_pre_interval_id&&window.clearInterval(window.__datalayer_pre_interval_id),window.__datalayer_pre.forEach((t=>window.dataLayer.push(t))),window.__datalayer_pre=[]),window.__datalayer_pre_interval_id&&(window.clearInterval(window.__datalayer_pre_interval_id),window.__datalayer_pre_interval_id=null))}function B(t){if(t.isDebug=!!t.isDebug,t.event){if(window.dataLayer=window.dataLayer||[],t.category||(t.category=t.event),t.label||(t.label=t.category),t.isDebug){e=t.event,P.some((t=>e.includes(t)))||console.warn("[Tracking] GTM event not caught",t.event);const n=N;Object.keys(t).every((e=>!(!n.includes(e)&&!t.skipValidation&&(console.warn("[Tracking] Element not enabled in DW",e),1))))}return function(t){return window.__datalayer_pre=window.__datalayer_pre||[],T()?(L(),window.dataLayer.push(t)):window.__datalayer_pre.push(t)}(t)}var e;return console.error("[Tracking] missing 'event' field",t),null}function M(){return!!window.location.search.includes("ss_debug")||U()}window.__datalayer_pre_interval_id||T()||(window.__datalayer_pre_interval_id=window.setInterval(L,500));const U=()=>/^localhost/.test(location.hostname)||"127.0.0.1"===location.hostname;function F(t,e){const n=n=>{const r=Object.assign(Object.assign({nonInteractive:!0},t),n);return e(r),r};return n.click=e=>n(Object.assign(Object.assign(Object.assign({},t),e),{action:"click",nonInteractive:!1})),n.impression=e=>n(Object.assign(Object.assign(Object.assign({},t),e),{action:"impression",nonInteractive:!0})),n.hover=e=>n(Object.assign(Object.assign(Object.assign({},t),e),{action:"hover",nonInteractive:!0})),n.loaded=e=>n(Object.assign(Object.assign(Object.assign({},t),e),{action:"loaded",nonInteractive:!0})),n.extend=n=>F(Object.assign(Object.assign({},t),n),e),n}function z(t,e){const n=Object.assign({},t);if(!n.event&&!n.category)throw console.error("[Tracking] Missing event or category field",n),new Error("Missing event or category field");return n.category||(n.category=n.event),n.event||(n.event=n.category),F(n,e)}function V(t){return z(t,B)}function $(t){return`${M()?"dev-":""}${t}`}z({category:"base-tracker"},B);const H="__frontend_utils_consistent_random";function W(){return window[H]||(window[H]=Math.random()),window[H]}const G=V({event:"browser-client-timings"}),K=.005;let q=new Map;function J(t,e){var n,r;q.set(t,e),n=t,r=e,(M()||W()<=K)&&G({category:`timings-event-${n}`,label:r.toString(),action:"timed",value:r})}function Y(t){try{const e=Math.round(Date.now()-function(){if(!window.performance&&!window.performance.timeOrigin)throw new Error("Performance value not set");return window.performance.timeOrigin}());return J(t,e),M()&&console.log("Timing",t,e),e}catch(t){console.error("TimingRecord Error",t)}}function X(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function Q(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))}Object.create,Object.create;var Z=n(9579),tt=n.n(Z),et=n(7557),nt=n.n(et);const rt=4,ot={profileId:null,namespaces:{adTags:{},devices:{set:[]},locations:{set:[]},languages:{contentLanguages:[],acceptLanguages:[]}}},it="silver_surfer_tracking_key_v2",at="silver_surfer_actions_v2",st="silver_surfer_interactions_v2";const ct=t=>`silver-surfer-galactus-fallback-user-profile-v2_${t}`;function ut(){return Q(this,void 0,void 0,(function*(){const t=localStorage.getItem(st);return t?JSON.parse(t):{}}))}function lt(){return Q(this,void 0,void 0,(function*(){const t=localStorage.getItem(it);return t?JSON.parse(t):[]}))}function dt(){return Q(this,void 0,void 0,(function*(){const t=localStorage.getItem(at);return t?JSON.parse(t):[]}))}const ft=(t,e)=>e.some((e=>t instanceof e));let pt,vt;const gt=new WeakMap,ht=new WeakMap,yt=new WeakMap,bt=new WeakMap,mt=new WeakMap;let wt={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return ht.get(t);if("objectStoreNames"===e)return t.objectStoreNames||yt.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ot(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function St(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(vt||(vt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(_t(this),t),Ot(gt.get(this))}:function(...t){return Ot(e.apply(_t(this),t))}:function(t,...n){const r=e.call(_t(this),t,...n);return yt.set(r,t.sort?t.sort():[t]),Ot(r)}:(t instanceof IDBTransaction&&function(t){if(ht.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{e(),r()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)}));ht.set(t,e)}(t),ft(t,pt||(pt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,wt):t);var e}function Ot(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{e(Ot(t.result)),r()},i=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",i)}));return e.then((e=>{e instanceof IDBCursor&&gt.set(e,t)})).catch((()=>{})),mt.set(e,t),e}(t);if(bt.has(t))return bt.get(t);const e=St(t);return e!==t&&(bt.set(t,e),mt.set(e,t)),e}const _t=t=>mt.get(t),Et=["get","getKey","getAll","getAllKeys","count"],It=["put","add","delete","clear"],xt=new Map;function At(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(xt.get(e))return xt.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=It.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!Et.includes(n))return;const i=async function(t,...e){const i=this.transaction(t,o?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(e.shift())),(await Promise.all([a[n](...e),o&&i.done]))[0]};return xt.set(e,i),i}var jt;function Dt(){return"undefined"!=typeof window&&window.location&&window.location.hostname&&window.location.hostname.includes("fandom.com")?"https://services.fandom.com/":"https://services.fandom-dev."+(location.hostname.match(/(?!\.)(pl|us)$/)||["us"])[0]+"/"}jt=wt,wt={...jt,get:(t,e,n)=>At(t,e)||jt.get(t,e,n),has:(t,e)=>!!At(t,e)||jt.has(t,e)};const kt={DEBUG:"ss_debug",BRANCH:"ss_branch_deploy",CANARY:"ss_canary",ENABLED_PATHFINDER_MODULE:"ss_pathfinder_enable",FORCED_PATHFINDER:"ss_pathfinder_forced",FORCED_BUCKETING:"ss_pathfinder_force_bucket"},Pt=U,Ct=(null==="71bac7f5d\n"?void 0:"71bac7f5d\n".replace(/\n/g,""))||"local",Rt=!0,Nt=t=>window.location.search.includes(t),Tt=()=>Nt(`${kt.DEBUG}=true`);function Lt(){}const Bt=Date.now(),Mt=(t,e,n=[])=>(r,...o)=>((t,e,n,r,...o)=>{const i=function(t){return"error"===t?console.error:"debug"===t?Tt()||Pt()?console.debug:Lt:console.log}(t),a=`%c${e} | ${function(){var t,e;return((Date.now()-(null!==(e=null===(t=window.performance)||void 0===t?void 0:t.timeOrigin)&&void 0!==e?e:Bt))/1e3).toFixed(4)}()}s | ${r}`;o.length?i(a,n,...o):i(a,n)})(e,t,n.join(";"),r,...o);function Ut(t){return["background-color: silver;","padding: 2px 4px","border-radius: 2px",`color: ${t}`]}const Ft={info:Mt("SilverSurfer","info",Ut("#000")),debug:Mt("SilverSurfer","debug",Ut("#330")),error:Mt("SilverSurfer","error",Ut("#300"))},zt=V({event:"browser-client-metric"}),Vt=W();function $t(t,e,n,r){try{return n<Vt&&!M()?null:zt({category:$(`browser-client-metric-${t}`),label:r,value:null!=e?e:t,action:"metric"})}catch(t){return null}}const Ht="silver-surfer",Wt=6,Gt="page-view-table",Kt="actions-table",qt="interactions-table",Jt="current",Yt="galactus-fallback-user-profile-table",Xt="active-data-table";let Qt=!1;function Zt(){return Q(this,void 0,void 0,(function*(){if(!Qt)try{return yield function(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(t,e),s=Ot(a);return r&&a.addEventListener("upgradeneeded",(t=>{r(Ot(a.result),t.oldVersion,t.newVersion,Ot(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),s.then((t=>{i&&t.addEventListener("close",(()=>i())),o&&t.addEventListener("versionchange",(()=>o()))})).catch((()=>{})),s}(Ht,Wt,{upgrade(t,e,n,r){t.objectStoreNames.contains(Gt)||t.createObjectStore(Gt),t.objectStoreNames.contains(Yt)||t.createObjectStore(Yt),t.objectStoreNames.contains(Kt)||t.createObjectStore(Kt,{autoIncrement:!0}),t.objectStoreNames.contains(qt)||t.createObjectStore(qt),t.objectStoreNames.contains(Xt)||t.createObjectStore(Xt)},blocked(){},blocking(){},terminated(){}})}catch(t){Ft.error("Cannot access indexedDB:",t),$t("cannot-access-indexeddb",1,1),Qt=!0}}))}const te=t=>`user-profile-${t}`;var ee;!function(t){t.IndexedDB="indexeddb",t.LocalStorage="localstorage"}(ee||(ee={}));const ne={[ee.IndexedDB]:200,[ee.LocalStorage]:100},re={[ee.IndexedDB]:500,[ee.LocalStorage]:200};function oe(){try{return!!(null===window||void 0===window?void 0:window.localStorage)}catch(t){return!1}}function ie(){try{return!!(null===window||void 0===window?void 0:window.indexedDB)}catch(t){return!1}}function ae(t){return Q(this,void 0,void 0,(function*(){const e=!!ie()&&(yield function(t){return Q(this,void 0,void 0,(function*(){const e=yield Zt();return(yield null==e?void 0:e.put(qt,t,Jt))===Jt}))}(t)),n=!!oe()&&(yield function(t){return Q(this,void 0,void 0,(function*(){try{localStorage.setItem(st,JSON.stringify(t))}catch(t){return!1}return!0}))}(t)),r=e||n;return r?Ft.debug("Local interactions updated from cross domain"):Ft.error("Failed to update local interactions"),r}))}function se(){return Q(this,void 0,void 0,(function*(){let t=-1,e=-1;if(ie())try{t=yield function(){return Q(this,void 0,void 0,(function*(){return 4*[yield lt(),yield dt(),yield ut()].map((t=>JSON.stringify(t).length)).reduce(((t,e)=>t+e),0)}))}()}catch(t){Ft.debug("Error while getting localStorage size",t)}if(oe())try{e=yield function(){return Q(this,void 0,void 0,(function*(){const t=yield Zt();let e=0,n=yield null==t?void 0:t.transaction(Gt).store.openCursor();for(;n;)e+=JSON.stringify(n.value).length,n=yield n.continue();let r=yield null==t?void 0:t.transaction(Kt).store.openCursor();for(;r;)e+=JSON.stringify(r.value).length,r=yield r.continue();return 4*e}))}()}catch(t){Ft.debug("Error while getting indexedDB size",t)}return{localStorageSize:t,indexedDBSize:e}}))}function ce(t,e,n,r={}){console.error("logErrorEvent",{client:t,clientVersion:e,name:n,data:r})}Math.max(re[ee.LocalStorage],ne[ee.LocalStorage]);const ue=(t,e)=>(n,r={})=>ce(t,e,n,r),le=(t,e)=>(n,r)=>ce(t,e,n,(({ok:t,redirected:e,status:n,statusText:r,type:o,url:i})=>({ok:t,redirected:e,status:n,statusText:r,type:o,url:i}))(r));ue("silver-surfer",Ct);const de=le("silver-surfer",Ct);function fe(t,e,n){return void 0===n&&(n={}),fetch(e,n).then((n=>("opaque"===n.type||n.ok||401===n.status||404===n.status||("function"==typeof t?t(e,n):console.error("fetchWithLogging Error",{url:e,response:n})),n)))}const pe=t=>(e,n={})=>fe(t,Dt()+e,Object.assign({mode:"cors",credentials:"include"},n)),ve=t=>(e,n,r={})=>fe(t,Dt()+e,Object.assign({method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",credentials:"include",body:JSON.stringify(n)},r)),ge=pe(de);ve(de);var he=n(9996),ye=n.n(he),be=function(){return be=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},be.apply(this,arguments)},me={channelId:"default",host:window,coordinatorHost:window.top},we={connect:"connect",connected:"connected"},Se="@wikia/post-quecast";function Oe(t){return t.channelId&&t.libId===Se&&t.action&&function(t){return"string"==typeof t.type&&"number"==typeof t.timestamp}(t.action)}function _e(t){return!t.data.private}function Ee(t,e){return t.data.channelId===e}function Ie(t){return t.data.action}var xe=function(){function t(){}return t.make=function(t){return function(t){var e;return t.host===t.coordinatorHost&&!!(null===(e=t.coordinatorHost[Se])||void 0===e?void 0:e.callbackConnector)}(t)?t.coordinatorHost[Se].callbackConnector:new je({senderHost:t.coordinatorHost,listenerHost:t.host})},t}(),Ae=function(){function t(t){this.coordinatorHost=t,this.callbacks=[]}return t.prototype.dispatch=function(t){var e=this;if(!Oe(t))throw new Error("Incorrect object type. Expected PostMessageData, but got "+t);this.callbacks.forEach((function(n){return n({data:t,source:e.coordinatorHost})}))},t.prototype.addListener=function(t){this.callbacks.push(t)},t.prototype.removeListener=function(t){this.callbacks=this.callbacks.filter((function(e){return e!==t}))},t}(),je=function(){function t(t){this.options=t,this.map=new Map}return t.prototype.dispatch=function(t){if(!Oe(t))throw new Error("Incorrect object type. Expected PostMessageData, but got "+t);this.options.senderHost.postMessage(t,"*")},t.prototype.addListener=function(t){var e=function(e){var n;(n=e)&&n.source&&n.data&&Oe(n.data)&&t(e)};this.map.set(t,e),this.options.listenerHost.addEventListener("message",e)},t.prototype.removeListener=function(t){var e=this.map.get(t);this.options.listenerHost.removeEventListener("message",e),this.map.delete(t)},t}(),De=function(){function t(t){this.callbacks=[],this.history=[],this.channelId=t.channelId,this.connector=xe.make(t),this.setupActions(),this.setupConnection()}return t.prototype.setupActions=function(){this.getHistory(),this.listenEvent()},t.prototype.getHistory=function(){var t=this,e=function(n){if(Ee(n,t.channelId)&&function(t){return!!t.data.private}(n)){var r=Ie(n);(function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.some((function(e){return t.type===e}))})(r,we.connected)&&(t.connector.removeListener(e),t.handleActions.apply(t,r.history))}};this.connector.addListener(e)},t.prototype.listenEvent=function(){var t=this;this.connector.addListener((function(e){if(Ee(e,t.channelId)&&_e(e)){var n=Ie(e);t.handleActions(n)}}))},t.prototype.handleActions=function(){for(var t,e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];(t=this.history).push.apply(t,n),n.forEach((function(t){return e.callbacks.forEach((function(e){return e(t)}))}))},t.prototype.setupConnection=function(){this.connector.dispatch({action:{type:we.connect,timestamp:Date.now()},channelId:this.channelId,private:!0,libId:Se})},t.prototype.addListener=function(t){this.history.forEach((function(e){return t(e)})),this.callbacks.push(t)},t.prototype.removeListener=function(t){this.callbacks=this.callbacks.filter((function(e){return e!==t}))},t}(),ke=function(){function t(t){void 0===t&&(t={});var e=be(be({},me),t);this.channelId=e.channelId,this.connector=xe.make(e)}return t.prototype.dispatch=function(t){this.connector.dispatch({action:be(be({},t),{timestamp:Date.now()}),channelId:this.channelId,private:!0,libId:Se})},t}(),Pe=function(){function t(t){void 0===t&&(t={});var e=be(be({},me),t);this.transmitter=new ke(e),this.receiver=new De(e)}return t.prototype.dispatch=function(t){this.transmitter.dispatch(t)},t.prototype.addListener=function(t){this.receiver.addListener(t)},t.prototype.removeListener=function(t){this.receiver.removeListener(t)},t}(),Ce=function(){function t(t,e){this.channelId=t,this.connectors=new Map,this.history=[],this.connectors.set(e,e[Se].callbackConnector)}return t.prototype.addConnection=function(t){this.ensureConnector(t).dispatch({action:this.createConnectedAction(),private:!0,channelId:this.channelId,libId:Se})},t.prototype.createConnectedAction=function(){return{type:we.connected,history:this.history,timestamp:Date.now()}},t.prototype.broadcast=function(t){var e=this;this.history.push(t),this.connectors.forEach((function(n){n.dispatch({action:t,channelId:e.channelId,libId:Se})}))},t.prototype.ensureConnector=function(t){return this.connectors.has(t)||this.connectors.set(t,new je({senderHost:t,listenerHost:t})),this.connectors.get(t)},t}(),Re=function(){function t(t){this.coordinatorHost=t,this.channels=new Map,this.callbackConnector=new Ae(t),this.postMessageConnector=new je({senderHost:t,listenerHost:t})}return t.prototype.init=function(){var t=this,e=function(e){_e(e)||(t.handleConnect(e),t.handleBroadcast(e))};this.callbackConnector.addListener(e),this.postMessageConnector.addListener(e)},t.prototype.handleConnect=function(t){(function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.some((function(e){return t.data.action.type===e}))})(t,we.connect)&&this.ensureChannel(t.data.channelId).addConnection(t.source)},t.prototype.handleBroadcast=function(t){(function(t){return!Object.values(we).some((function(e){return t.data.action.type===e}))})(t)&&this.ensureChannel(t.data.channelId).broadcast(t.data.action)},t.prototype.ensureChannel=function(t){return this.channels.has(t)||this.channels.set(t,new Ce(t,this.coordinatorHost)),this.channels.get(t)},t}();class Ne{constructor(){this.history=new Map,function(t){if(void 0===t&&(t=window),!t[Se]){var e=new Re(t);e.init(),t[Se]=e}}(),this.communicator=new Pe}dispatch(t){this.communicator.dispatch(Object.assign(Object.assign({},t),{__global:!0}))}on(t,e){this.communicator.addListener((n=>this.run(n,t,e)))}once(t,e){this.communicator.addListener((n=>this.runOnce(n,t,e)))}run(t,e,n){this.ofType(t,e)&&n(t)}runOnce(t,e,n){if(this.ofType(t,e)){if(this.history.has(e))return n(t);this.history.set(e,!0),n(t)}}ofType(t,e){return t.type===e}}let Te=null;function Le(){return null===Te&&(Te=new Ne),Te}const Be="[AdEngine] Ad Slot loaded",Me="[AdEngine] UAP Load status",Ue="[AdEngine] Ad clicked",Fe="[AdEngine] BAB detection finished",ze=function(){return Q(this,void 0,void 0,(function*(){if("boolean"==typeof(null===window||void 0===window?void 0:window.__f_optin))return Promise.resolve(window.__f_optin);const t=Le();return new Promise(((e,n)=>{t.once("[AdEngine OptIn] set opt in",(({geoRequiresConsent:t,geoRequiresSignal:r,gdprConsent:o,ccpaSignal:i})=>{t&&o||r&&!i||!r&&!t?e(!0):n(!1)}))}))}))};function Ve(t){const e=new RegExp("(googlebot/|Googlebot-Mobile|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)","i"),n="string"==typeof t?t:null===navigator||void 0===navigator?void 0:navigator.userAgent;return e.test(n)}function $e(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function He(t){return!!t&&!!t[Cn]}function We(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Rn}(t)||Array.isArray(t)||!!t[Pn]||!!t.constructor[Pn]||Qe(t)||Ze(t))}function Ge(t){return He(t)||$e(23,t),t[Cn].t}function Ke(t,e,n){void 0===n&&(n=!1),0===qe(t)?(n?Object.keys:Nn)(t).forEach((function(r){n&&"symbol"==typeof r||e(r,t[r],t)})):t.forEach((function(n,r){return e(r,n,t)}))}function qe(t){var e=t[Cn];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Qe(t)?2:Ze(t)?3:0}function Je(t,e){return 2===qe(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Ye(t,e,n){var r=qe(t);2===r?t.set(e,n):3===r?(t.delete(e),t.add(n)):t[e]=n}function Xe(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function Qe(t){return An&&t instanceof Map}function Ze(t){return jn&&t instanceof Set}function tn(t){return t.o||t.t}function en(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=Tn(t);delete e[Cn];for(var n=Nn(e),r=0;r<n.length;r++){var o=n[r],i=e[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[o]})}return Object.create(Object.getPrototypeOf(t),e)}function nn(t,e){return void 0===e&&(e=!1),on(t)||He(t)||!We(t)||(qe(t)>1&&(t.set=t.add=t.clear=t.delete=rn),Object.freeze(t),e&&Ke(t,(function(t,e){return nn(e,!0)}),!0)),t}function rn(){$e(2)}function on(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function an(t){var e=Ln[t];return e||$e(18,t),e}function sn(){return In}function cn(t,e){e&&(an("Patches"),t.u=[],t.s=[],t.v=e)}function un(t){ln(t),t.p.forEach(fn),t.p=null}function ln(t){t===In&&(In=t.l)}function dn(t){return In={p:[],l:In,h:t,m:!0,_:0}}function fn(t){var e=t[Cn];0===e.i||1===e.i?e.j():e.O=!0}function pn(t,e){e._=e.p.length;var n=e.p[0],r=void 0!==t&&t!==n;return e.h.g||an("ES5").S(e,t,r),r?(n[Cn].P&&(un(e),$e(4)),We(t)&&(t=vn(e,t),e.l||hn(e,t)),e.u&&an("Patches").M(n[Cn].t,t,e.u,e.s)):t=vn(e,n,[]),un(e),e.u&&e.v(e.u,e.s),t!==kn?t:void 0}function vn(t,e,n){if(on(e))return e;var r=e[Cn];if(!r)return Ke(e,(function(o,i){return gn(t,r,e,o,i,n)}),!0),e;if(r.A!==t)return e;if(!r.P)return hn(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=en(r.k):r.o;Ke(3===r.i?new Set(o):o,(function(e,i){return gn(t,r,o,e,i,n)})),hn(t,o,!1),n&&t.u&&an("Patches").R(r,n,t.u,t.s)}return r.o}function gn(t,e,n,r,o,i){if(He(o)){var a=vn(t,o,i&&e&&3!==e.i&&!Je(e.D,r)?i.concat(r):void 0);if(Ye(n,r,a),!He(a))return;t.m=!1}if(We(o)&&!on(o)){if(!t.h.F&&t._<1)return;vn(t,o),e&&e.A.l||hn(t,o)}}function hn(t,e,n){void 0===n&&(n=!1),t.h.F&&t.m&&nn(e,n)}function yn(t,e){var n=t[Cn];return(n?tn(n):t)[e]}function bn(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function mn(t){t.P||(t.P=!0,t.l&&mn(t.l))}function wn(t){t.o||(t.o=en(t.t))}function Sn(t,e,n){var r=Qe(e)?an("MapSet").N(e,n):Ze(e)?an("MapSet").T(e,n):t.g?function(t,e){var n=Array.isArray(t),r={i:n?1:0,A:e?e.A:sn(),P:!1,I:!1,D:{},l:e,t,k:null,o:null,j:null,C:!1},o=r,i=Bn;n&&(o=[r],i=Mn);var a=Proxy.revocable(o,i),s=a.revoke,c=a.proxy;return r.k=c,r.j=s,c}(e,n):an("ES5").J(e,n);return(n?n.A:sn()).p.push(r),r}function On(t){return He(t)||$e(22,t),function t(e){if(!We(e))return e;var n,r=e[Cn],o=qe(e);if(r){if(!r.P&&(r.i<4||!an("ES5").K(r)))return r.t;r.I=!0,n=_n(e,o),r.I=!1}else n=_n(e,o);return Ke(n,(function(e,o){r&&function(t,e){return 2===qe(t)?t.get(e):t[e]}(r.t,e)===o||Ye(n,e,t(o))})),3===o?new Set(n):n}(t)}function _n(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return en(t)}var En,In,xn="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),An="undefined"!=typeof Map,jn="undefined"!=typeof Set,Dn="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,kn=xn?Symbol.for("immer-nothing"):((En={})["immer-nothing"]=!0,En),Pn=xn?Symbol.for("immer-draftable"):"__$immer_draftable",Cn=xn?Symbol.for("immer-state"):"__$immer_state",Rn=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Nn="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Tn=Object.getOwnPropertyDescriptors||function(t){var e={};return Nn(t).forEach((function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)})),e},Ln={},Bn={get:function(t,e){if(e===Cn)return t;var n=tn(t);if(!Je(n,e))return function(t,e,n){var r,o=bn(e,n);return o?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(t.k):void 0}(t,n,e);var r=n[e];return t.I||!We(r)?r:r===yn(t.t,e)?(wn(t),t.o[e]=Sn(t.A.h,r,t)):r},has:function(t,e){return e in tn(t)},ownKeys:function(t){return Reflect.ownKeys(tn(t))},set:function(t,e,n){var r=bn(tn(t),e);if(null==r?void 0:r.set)return r.set.call(t.k,n),!0;if(!t.P){var o=yn(tn(t),e),i=null==o?void 0:o[Cn];if(i&&i.t===n)return t.o[e]=n,t.D[e]=!1,!0;if(Xe(n,o)&&(void 0!==n||Je(t.t,e)))return!0;wn(t),mn(t)}return t.o[e]===n&&"number"!=typeof n&&(void 0!==n||e in t.o)||(t.o[e]=n,t.D[e]=!0,!0)},deleteProperty:function(t,e){return void 0!==yn(t.t,e)||e in t.t?(t.D[e]=!1,wn(t),mn(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=tn(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:r.enumerable,value:n[e]}:r},defineProperty:function(){$e(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){$e(12)}},Mn={};Ke(Bn,(function(t,e){Mn[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),Mn.deleteProperty=function(t,e){return Mn.set.call(this,t,e,void 0)},Mn.set=function(t,e,n){return Bn.set.call(this,t[0],e,n,t[0])};var Un=function(){function t(t){var e=this;this.g=Dn,this.F=!0,this.produce=function(t,n,r){if("function"==typeof t&&"function"!=typeof n){var o=n;n=t;var i=e;return function(t){var e=this;void 0===t&&(t=o);for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return i.produce(t,(function(t){var r;return(r=n).call.apply(r,[e,t].concat(a))}))}}var a;if("function"!=typeof n&&$e(6),void 0!==r&&"function"!=typeof r&&$e(7),We(t)){var s=dn(e),c=Sn(e,t,void 0),u=!0;try{a=n(c),u=!1}finally{u?un(s):ln(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(t){return cn(s,r),pn(t,s)}),(function(t){throw un(s),t})):(cn(s,r),pn(a,s))}if(!t||"object"!=typeof t){if(void 0===(a=n(t))&&(a=t),a===kn&&(a=void 0),e.F&&nn(a,!0),r){var l=[],d=[];an("Patches").M(t,a,l,d),r(l,d)}return a}$e(21,t)},this.produceWithPatches=function(t,n){if("function"==typeof t)return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return e.produceWithPatches(n,(function(e){return t.apply(void 0,[e].concat(o))}))};var r,o,i=e.produce(t,n,(function(t,e){r=t,o=e}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(t){return[t,r,o]})):[i,r,o]},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){We(t)||$e(8),He(t)&&(t=On(t));var e=dn(this),n=Sn(this,t,void 0);return n[Cn].C=!0,ln(e),n},e.finishDraft=function(t,e){var n=(t&&t[Cn]).A;return cn(n,e),pn(void 0,n)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!Dn&&$e(20),this.g=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}n>-1&&(e=e.slice(n+1));var o=an("Patches").$;return He(t)?o(t,e):this.produce(t,(function(t){return o(t,e)}))},t}(),Fn=new Un,zn=Fn.produce;Fn.produceWithPatches.bind(Fn),Fn.setAutoFreeze.bind(Fn),Fn.setUseProxies.bind(Fn),Fn.applyPatches.bind(Fn),Fn.createDraft.bind(Fn),Fn.finishDraft.bind(Fn);const Vn=zn;function $n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Hn(Object(n),!0).forEach((function(e){$n(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Gn(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Kn="function"==typeof Symbol&&Symbol.observable||"@@observable",qn=function(){return Math.random().toString(36).substring(7).split("").join(".")},Jn={INIT:"@@redux/INIT"+qn(),REPLACE:"@@redux/REPLACE"+qn(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+qn()}};function Yn(t,e,n){var r;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Gn(0));if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Gn(1));return n(Yn)(t,e)}if("function"!=typeof t)throw new Error(Gn(2));var o=t,i=e,a=[],s=a,c=!1;function u(){s===a&&(s=a.slice())}function l(){if(c)throw new Error(Gn(3));return i}function d(t){if("function"!=typeof t)throw new Error(Gn(4));if(c)throw new Error(Gn(5));var e=!0;return u(),s.push(t),function(){if(e){if(c)throw new Error(Gn(6));e=!1,u();var n=s.indexOf(t);s.splice(n,1),a=null}}}function f(t){if(!function(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t))throw new Error(Gn(7));if(void 0===t.type)throw new Error(Gn(8));if(c)throw new Error(Gn(9));try{c=!0,i=o(i,t)}finally{c=!1}for(var e=a=s,n=0;n<e.length;n++)(0,e[n])();return t}return f({type:Jn.INIT}),(r={dispatch:f,subscribe:d,getState:l,replaceReducer:function(t){if("function"!=typeof t)throw new Error(Gn(10));o=t,f({type:Jn.REPLACE})}})[Kn]=function(){var t,e=d;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new Error(Gn(11));function n(){t.next&&t.next(l())}return n(),{unsubscribe:e(n)}}})[Kn]=function(){return this},t},r}function Xn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function Qn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),r=function(){throw new Error(Gn(15))},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=e.map((function(t){return t(o)}));return r=Xn.apply(void 0,i)(n.dispatch),Wn(Wn({},n),{},{dispatch:r})}}}function Zn(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(o){return"function"==typeof o?o(n,r,t):e(o)}}}}var tr=Zn();tr.withExtraArgument=Zn;const er=tr;var nr,rr=(nr=function(t,e){return nr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},nr(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}nr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),or=function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t},ir=Object.defineProperty,ar=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),sr=Object.prototype.hasOwnProperty,cr=Object.prototype.propertyIsEnumerable,ur=function(t,e,n){return e in t?ir(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},lr=function(t,e){for(var n in e||(e={}))sr.call(e,n)&&ur(t,n,e[n]);if(ar)for(var r=0,o=ar(e);r<o.length;r++)n=o[r],cr.call(e,n)&&ur(t,n,e[n]);return t},dr="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Xn:Xn.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var fr=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.apply(this,n)||this;return Object.setPrototypeOf(o,e.prototype),o}return rr(e,t),Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.prototype.concat.apply(this,e)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?new(e.bind.apply(e,or([void 0],t[0].concat(this)))):new(e.bind.apply(e,or([void 0],t.concat(this))))},e}(Array);function pr(t,e){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(e){var o=e.apply(void 0,n);if(!o)throw new Error("prepareAction did not return an object");return lr(lr({type:t,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:t,payload:n[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(e){return e.type===t},n}function vr(t){var e,n={},r=[],o={addCase:function(t,e){var r="string"==typeof t?t:t.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=e,o},addMatcher:function(t,e){return r.push({matcher:t,reducer:e}),o},addDefaultCase:function(t){return e=t,o}};return t(o),[n,r,e]}function gr(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof t.initialState?t.initialState:Vn(t.initialState,(function(){})),o=t.reducers||{},i=Object.keys(o),a={},s={},c={};function u(){var e="function"==typeof t.extraReducers?vr(t.extraReducers):[t.extraReducers],n=e[0],o=void 0===n?{}:n,i=e[1],a=void 0===i?[]:i,c=e[2],u=void 0===c?void 0:c,l=lr(lr({},o),s);return function(t,e,n,r){void 0===n&&(n=[]);var o,i="function"==typeof e?vr(e):[e,n,r],a=i[0],s=i[1],c=i[2];if(function(t){return"function"==typeof t}(t))o=function(){return Vn(t(),(function(){}))};else{var u=Vn(t,(function(){}));o=function(){return u}}function l(t,e){void 0===t&&(t=o());var n=or([a[e.type]],s.filter((function(t){return(0,t.matcher)(e)})).map((function(t){return t.reducer})));return 0===n.filter((function(t){return!!t})).length&&(n=[c]),n.reduce((function(t,n){if(n){var r;if(He(t))return void 0===(r=n(t,e))?t:r;if(We(t))return Vn(t,(function(t){return n(t,e)}));if(void 0===(r=n(t,e))){if(null===t)return t;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return t}),t)}return l.getInitialState=o,l}(r,l,a,u)}return i.forEach((function(t){var n,r,i=o[t],u=e+"/"+t;"reducer"in i?(n=i.reducer,r=i.prepare):n=i,a[t]=n,s[u]=n,c[t]=r?pr(u,r):pr(u)})),{name:e,reducer:function(t,e){return n||(n=u()),n(t,e)},actions:c,caseReducers:a,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}function hr(t){setTimeout(t,1)}!function(){function t(t,e){var n=o[t];return n?n.enumerable=e:o[t]=n={configurable:!0,enumerable:e,get:function(){var e=this[Cn];return Bn.get(e,t)},set:function(e){var n=this[Cn];Bn.set(n,t,e)}},n}function e(t){for(var e=t.length-1;e>=0;e--){var o=t[e][Cn];if(!o.P)switch(o.i){case 5:r(o)&&mn(o);break;case 4:n(o)&&mn(o)}}}function n(t){for(var e=t.t,n=t.k,r=Nn(n),o=r.length-1;o>=0;o--){var i=r[o];if(i!==Cn){var a=e[i];if(void 0===a&&!Je(e,i))return!0;var s=n[i],c=s&&s[Cn];if(c?c.t!==a:!Xe(s,a))return!0}}var u=!!e[Cn];return r.length!==Nn(e).length+(u?0:1)}function r(t){var e=t.k;if(e.length!==t.t.length)return!0;var n=Object.getOwnPropertyDescriptor(e,e.length-1);if(n&&!n.get)return!0;for(var r=0;r<e.length;r++)if(!e.hasOwnProperty(r))return!0;return!1}var o={};!function(t,e){Ln[t]||(Ln[t]=e)}("ES5",{J:function(e,n){var r=Array.isArray(e),o=function(e,n){if(e){for(var r=Array(n.length),o=0;o<n.length;o++)Object.defineProperty(r,""+o,t(o,!0));return r}var i=Tn(n);delete i[Cn];for(var a=Nn(i),s=0;s<a.length;s++){var c=a[s];i[c]=t(c,e||!!i[c].enumerable)}return Object.create(Object.getPrototypeOf(n),i)}(r,e),i={i:r?5:4,A:n?n.A:sn(),P:!1,I:!1,D:{},l:n,t:e,k:o,o:null,O:!1,C:!1};return Object.defineProperty(o,Cn,{value:i,writable:!0}),o},S:function(t,n,o){o?He(n)&&n[Cn].A===t&&e(t.p):(t.u&&function t(e){if(e&&"object"==typeof e){var n=e[Cn];if(n){var o=n.t,i=n.k,a=n.D,s=n.i;if(4===s)Ke(i,(function(e){e!==Cn&&(void 0!==o[e]||Je(o,e)?a[e]||t(i[e]):(a[e]=!0,mn(n)))})),Ke(o,(function(t){void 0!==i[t]||Je(i,t)||(a[t]=!1,mn(n))}));else if(5===s){if(r(n)&&(mn(n),a.length=!0),i.length<o.length)for(var c=i.length;c<o.length;c++)a[c]=!1;else for(var u=o.length;u<i.length;u++)a[u]=!0;for(var l=Math.min(i.length,o.length),d=0;d<l;d++)i.hasOwnProperty(d)||(a[d]=!0),void 0===a[d]&&t(i[d])}}}}(t.p[0]),e(t.p))},K:function(t){return 4===t.i?n(t):r(t)}})}();var yr=n(7361),br=n.n(yr),mr=n(3608),wr=n.n(mr);const Sr="www.fandom.com",Or={[v.UNKNOWN]:[],[v.MEDIAWIKI]:["2350603","174","38969","4396","159","130814","2180","105","2237"],[v.DISCUSSIONS]:[],[v.TRIVIA]:[],[v.FANHUB]:[],[v.VIDEO]:[],[v.F2]:[]};function _r(t){return!(t<1)||wr()(0,100)<=100*t}var Er;function Ir(t,e){return Ft.debug(`App state changed: ${t}->${e}`),e}!function(t){t.New="new",t.Starting="starting",t.Delayed="delayed",t.Ready="ready"}(Er||(Er={}));const xr=gr({name:"AppSlice",initialState:{state:Er.New,config:{sendDebugLog:Tt()||_r(br()(window,"_ss.sendDebugLogRate",.01)),sendGalactusRequest:Tt()||Pt()||_r(br()(window,"_ss.sendGalactusRequestRate",1)),sendTracking:function(){const t=D(),e=Or[t.product],n=null==e?void 0:e.includes(t.productId);return _r(br()(window,"_ss.sendTrackingRate",n?1:0))}(),disableCrossdomain:Nt("ss_no_crossdomain=true")||function(){var t;return!!Ve()||((null===(t=null===window||void 0===window?void 0:window.location)||void 0===t?void 0:t.host)===Sr?(Ft.debug("Cross domain is not needed for fandom.com"),!0):br()(window,"_ss.disableCrossdomain",!1))}(),manualPageview:Pt()&&Nt("ss_no_pageview=true")||function(){const t=br()(window,"_ss.manualPageview",!1),e=S.fromWindow();let n=!1;return e.isValid||(Ft.debug("Page context is not valid! Assuming lazy load (need manual PV trigger)",e),n=!0),t||n}()},clients:[]},reducers:{starting:t=>{t.state!==Er.New&&t.state!==Er.Delayed||(t.state=Ir(t.state,Er.Starting))},delayed:t=>{t.state===Er.New&&(t.state=Ir(t.state,Er.Delayed))},ready:t=>{t.state===Er.Starting&&(t.state=Ir(t.state,Er.Ready))},addClient:(t,e)=>{const n=e.payload;t.clients.push(n)},reboot(t){if(t.state===Er.Ready){const e=t.clients.map((t=>null==t?void 0:t.onReboot)).filter(Boolean);hr((()=>e.forEach((t=>t()))))}}}}),Ar=xr.actions,{starting:jr,ready:Dr,delayed:kr,addClient:Pr,reboot:Cr}=xr.actions,Rr=xr.reducer,Nr=gr({name:"ContextSlice",initialState:{user:h.getDefault(),page:S.getDefault(),adBlockDetected:null,adSlots:{}},reducers:{updateUser:(t,e)=>{t.user=e.payload},updatePage:(t,e)=>{t.page=e.payload},adSlotUpdate(t,e){t.adSlots[e.payload.name]=e.payload.status},adBlockDetected:(t,e)=>{t.adBlockDetected=e.payload,Ft.debug("Feature: AdBlock Detected",t.adBlockDetected)}}}),{updateUser:Tr,updatePage:Lr,adSlotUpdate:Br,adBlockDetected:Mr}=(Nr.actions,Nr.actions),Ur=Nr.reducer;var Fr,zr,Vr;(Vr=Fr||(Fr={})).Request="CrossDomain::Register::Request",Vr.Response="CrossDomain::Register::Response",function(t){t.Off="off",t.Initializing="initializing",t.Ready="ready"}(zr||(zr={}));const $r="2";function Hr(t){return{id:`${t.productId}_${t.pageId}_${t.time}`,context:t.toTransport(),time:t.time,version:$r}}function Wr(t){if("1"===(null==t?void 0:t.version)){const e=t;return S.fromTransport({p:v.MEDIAWIKI,pCat:e.vertical,pId:e.communityId,pgId:e.pageId,time:e.time})}if((null==t?void 0:t.version)!==$r)return S.getDefault();const e=t;return S.fromTransport(e.context)}const Gr=gr({name:"BrowserStorageSlice",initialState:{session:{interactions:{},actions:[],pages:[]},history:{interactions:{},actions:[],pages:[]},serviceCache:{galactusUserProfile:{},activeData:{}},local:{status:zr.Initializing,size:{localStorageSize:-1,indexedDBSize:-1}},crossdomain:{status:zr.Initializing,statusErrorMessage:null,size:{localStorageSize:-1,indexedDBSize:-1},pagesFinished:!1,actionsFinished:!1,interactionsFinished:!1}},reducers:{cacheGalactusUserProfile:(t,e)=>{t.serviceCache.galactusUserProfile[e.payload.beaconId]=e.payload.profile},cacheActiveData:(t,e)=>{t.serviceCache.activeData=e.payload.activeData},crossdomainStatus:(t,e)=>{var n;const r=e.payload.status;t.crossdomain.status!=zr.Ready&&(t.crossdomain.status=r,t.crossdomain.statusErrorMessage=r===zr.Off?null===(n=e.payload)||void 0===n?void 0:n.statusErrorMessage:"")},sessionPageViewSaved:(t,e)=>{t.session.pages.push(Wr(e.payload))},sessionActionSaved:(t,e)=>{t.session.actions.push(e.payload)},sessionAddInteraction:(t,e)=>{var n;const{interactions:r}=t.session,o=null!==(n=r[e.payload])&&void 0!==n?n:0;r[e.payload]=o+1,t.session.interactions=r},updateCrossdomainInteractions:(t,e)=>{t.history.interactions=e.payload,t.crossdomain.interactionsFinished=!0,t.crossdomain.status=zr.Ready},updateCrossdomainActions:(t,e)=>{t.history.actions=e.payload,t.crossdomain.actionsFinished=!0,t.crossdomain.status=zr.Ready},updateCrossdomainPages:(t,e)=>{t.history.pages=e.payload.map(Wr),t.crossdomain.pagesFinished=!0,t.crossdomain.status=zr.Ready},updateCrossdomainSize:(t,e)=>{t.crossdomain.size=e.payload,t.crossdomain.status=zr.Ready},updateLocalHistory:(t,e)=>{var n,r,o,i;t.history.interactions=e.payload.interactions,t.history.pages=null!==(r=null===(n=e.payload.pages)||void 0===n?void 0:n.map(Wr))&&void 0!==r?r:[],t.history.actions=null!==(i=null===(o=e.payload)||void 0===o?void 0:o.actions)&&void 0!==i?i:[],t.local.status=zr.Ready},updateLocalStorageSize:(t,e)=>{t.local.size=e.payload}}}),{cacheGalactusUserProfile:Kr,cacheActiveData:qr,crossdomainStatus:Jr,sessionPageViewSaved:Yr,sessionActionSaved:Xr,sessionAddInteraction:Qr,updateCrossdomainSize:Zr,updateCrossdomainPages:to,updateCrossdomainActions:eo,updateCrossdomainInteractions:no,updateLocalHistory:ro,updateLocalStorageSize:oo}=(Gr.actions,Gr.actions),io=function(t){var e,n=function(t){return function(t){void 0===t&&(t={});var e=t.thunk,n=void 0===e||e,r=(t.immutableCheck,t.serializableCheck,new fr);return n&&(function(t){return"boolean"==typeof t}(n)?r.push(er):r.push(er.withExtraArgument(n.extraArgument))),r}(t)},r=t||{},o=r.reducer,i=void 0===o?void 0:o,a=r.middleware,s=void 0===a?n():a,c=r.devTools,u=void 0===c||c,l=r.preloadedState,d=void 0===l?void 0:l,f=r.enhancers,p=void 0===f?void 0:f;if("function"==typeof i)e=i;else{if(!function(t){if("object"!=typeof t||null===t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return e===n}(i))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');e=function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var o=e[r];"function"==typeof t[o]&&(n[o]=t[o])}var i,a=Object.keys(n);try{!function(t){Object.keys(t).forEach((function(e){var n=t[e];if(void 0===n(void 0,{type:Jn.INIT}))throw new Error(Gn(12));if(void 0===n(void 0,{type:Jn.PROBE_UNKNOWN_ACTION()}))throw new Error(Gn(13))}))}(n)}catch(t){i=t}return function(t,e){if(void 0===t&&(t={}),i)throw i;for(var r=!1,o={},s=0;s<a.length;s++){var c=a[s],u=n[c],l=t[c],d=u(l,e);if(void 0===d)throw e&&e.type,new Error(Gn(14));o[c]=d,r=r||d!==l}return(r=r||a.length!==Object.keys(t).length)?o:t}}(i)}var v=s;"function"==typeof v&&(v=v(n));var g=Qn.apply(void 0,v),h=Xn;u&&(h=dr(lr({trace:!1},"object"==typeof u&&u)));var y=[g];return Array.isArray(p)?y=or([g],p):"function"==typeof p&&(y=p(y)),Yn(e,d,h.apply(void 0,y))}({reducer:{App:Rr,Context:Ur,BrowserStorage:Gr.reducer},middleware:t=>t({serializableCheck:{ignoredPaths:["App.clients","Context.user","Context.page","BrowserStorage.session.pages","BrowserStorage.history.pages"],ignoredActions:["AppSlice/addClient","ContextSlice/updateUser","ContextSlice/updatePage"]}}),devTools:{name:"SilverSurfer",trace:Tt()}}),ao=io;var so=n(4908),co=n.n(so),uo="NOT_FOUND",lo=function(t,e){return t===e};function fo(t,e){var n,r,o="object"==typeof e?e:{equalityCheck:e},i=o.equalityCheck,a=void 0===i?lo:i,s=o.maxSize,c=void 0===s?1:s,u=o.resultEqualityCheck,l=function(t){return function(e,n){if(null===e||null===n||e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t(e[o],n[o]))return!1;return!0}}(a),d=1===c?(n=l,{get:function(t){return r&&n(r.key,t)?r.value:uo},put:function(t,e){r={key:t,value:e}},getEntries:function(){return r?[r]:[]},clear:function(){r=void 0}}):function(t,e){var n=[];function r(t){var r=n.findIndex((function(n){return e(t,n.key)}));if(r>-1){var o=n[r];return r>0&&(n.splice(r,1),n.unshift(o)),o.value}return uo}return{get:r,put:function(e,o){r(e)===uo&&(n.unshift({key:e,value:o}),n.length>t&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(c,l);function f(){var e=d.get(arguments);if(e===uo){if(e=t.apply(null,arguments),u){var n=d.getEntries().find((function(t){return u(t.value,e)}));n&&(e=n.value)}d.put(arguments,e)}return e}return f.clearCache=function(){return d.clear()},f}function po(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var i,a=0,s={memoizeOptions:void 0},c=r.pop();if("object"==typeof c&&(s=c,c=r.pop()),"function"!=typeof c)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof c+"]");var u=s.memoizeOptions,l=void 0===u?n:u,d=Array.isArray(l)?l:[l],f=function(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every((function(t){return"function"==typeof t}))){var n=e.map((function(t){return"function"==typeof t?"function "+(t.name||"unnamed")+"()":typeof t})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return e}(r),p=t.apply(void 0,[function(){return a++,c.apply(null,arguments)}].concat(d)),v=t((function(){for(var t=[],e=f.length,n=0;n<e;n++)t.push(f[n].apply(null,arguments));return i=p.apply(null,t)}));return Object.assign(v,{resultFunc:c,memoizedResultFunc:p,dependencies:f,lastResult:function(){return i},recomputations:function(){return a},resetRecomputations:function(){return a=0}}),v}}var vo=po(fo);function go(t){return 0===Object.keys(t||{}).length}function ho(t){try{return t.reduce(((t,e)=>t+Object.keys(e).length),0)}catch(t){return 0}}var yo=n(5578),bo=n.n(yo);function mo(t){const{onReboot:e}=t;return X(t,["onReboot"])}function wo(t,e){return(null==t?void 0:t.name)===(null==e?void 0:e.name)}const So=t=>t.App.state===Er.Ready,Oo=t=>t.App.state===Er.Delayed,_o=t=>t.App.clients,Eo=t=>vo(_o,(e=>e.find((e=>e.token===t)))),Io=t=>t.App.config.sendDebugLog,xo=t=>t.App.config.sendGalactusRequest,Ao=t=>t.App.config.disableCrossdomain,jo=t=>t.App.config.manualPageview,Do=t=>t.Context.user,ko=t=>t.Context.page,Po=t=>t.Context.adBlockDetected,Co=t=>t.Context.adSlots,Ro=t=>t.BrowserStorage.crossdomain.status,No=vo(Ro,(t=>"initializing"!==t)),To=vo(Ro,(t=>t===zr.Ready)),Lo=vo((t=>t.BrowserStorage.local.status),(t=>t===zr.Ready)),Bo=vo(To,Lo,((t,e)=>t||e)),Mo=vo(ko,(t=>t.BrowserStorage.session.pages),(t=>t.BrowserStorage.history.pages),((t,e,n)=>{return r=[t].concat(e).concat(n).filter(Boolean),c(r,(function(t){return t.time})).sort((function(t,e){return e.time-t.time}));var r})),Uo=vo((t=>t.BrowserStorage.session.actions),(t=>t.BrowserStorage.history.actions),((t,e)=>{return n=t.concat(e).filter(Boolean),bo()(n,(t=>t.action.time)).sort(((t,e)=>e.action.time-t.action.time));var n})),Fo=t=>t.BrowserStorage.history.interactions,zo=t=>t.BrowserStorage.session.interactions,Vo=vo(zo,Fo,((t,e)=>function(t){const e={};return t.forEach((t=>{for(const[n,r]of Object.entries(t))e[n]?e[n]+=r:e[n]=r})),e}([t,e]))),$o=vo(zo,Fo,((t,e)=>{const n=Object.keys(t),r=Object.keys(e),o=[].concat(n,r).filter(Boolean);return co()(o)})),Ho=vo([Mo],(t=>{const e={};return t.forEach((t=>{if(t.isValid){const{product:n,productId:r}=t,o=e[n]||{};o[r]=(o[r]||0)+1,e[n]=o}})),e})),Wo=vo((t=>t.BrowserStorage.crossdomain.pagesFinished),(t=>t.BrowserStorage.crossdomain.actionsFinished),(t=>t.BrowserStorage.crossdomain.interactionsFinished),((t,e,n)=>t&&e&&n)),Go=t=>t.App.config.disableCrossdomain||t.BrowserStorage.crossdomain.status===zr.Off,Ko=t=>e=>{var n;return null===(n=e.BrowserStorage.serviceCache.galactusUserProfile)||void 0===n?void 0:n[t]},qo=t=>t.BrowserStorage.serviceCache.activeData,Jo=vo((t=>t.App.state===Er.Starting),Lo,ko,((t,e,n)=>t&&e&&!!n)),Yo=V({event:"silversurfer",category:$("silversurfer"),isDebug:function(){const t=Object.values(kt);for(let e=0;e<t.length;e++)if(Nt(t[e]))return!0;return!1}()}),Xo=Yo,Qo=window.requestIdleCallback||function(t){let e=Date.now();return window.setTimeout((function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})}),1)},Zo=window.cancelIdleCallback||function(t){window.clearTimeout(t)},ti=6e4;let ei=!1;function ni(t){return Q(this,void 0,void 0,(function*(){const e=t||j();let n;if(n=Ko(e)(ao.getState()),n)Ft.debug("getGalactusUserProfile: Profile read from cache",n);else{const e=yield function(t){return Q(this,void 0,void 0,(function*(){return ie()?yield function(t){return Q(this,void 0,void 0,(function*(){const e=yield Zt(),n=yield null==e?void 0:e.get(Yt,te(t));return n&&n.apiVersion===rt?nt()(n,"apiVersion"):null}))}(t):oe()?yield function(t){return Q(this,void 0,void 0,(function*(){const e=localStorage.getItem(ct(t));if(e){const t=JSON.parse(e);if(t&&t.apiVersion===rt)return nt()(t,"apiVersion")}return null}))}(t):null}))}(t);e&&(n=ye()(ot,e)),Ft.debug("getGalactusUserProfile: Profile read from storage",n)}return!ei&&xo(ao.getState())&&(ei=!0,hr((()=>function(t){return Q(this,void 0,void 0,(function*(){let e=null;const n=Qo((()=>Q(this,void 0,void 0,(function*(){if(!(Date.now()-0<ti))try{const n=yield function(t){return Q(this,void 0,void 0,(function*(){if(Ve())return null;try{yield ze()}catch(t){return Ft.debug("Consent not given, cannot contact Galactus"),null}try{const e=yield ge(`galactus-user-profile/profiles/${t}`);if(200===e.status){const t=yield e.json(),n=function(t){return ye()(ot,t)}(t);return Ft.debug("Galactus API response",n),B({event:"custom-galactus-api-response-full",category:"custom-galactus-api-response-full",label:"custom-galactus-api-response-full",galactusResponse:t,skipValidation:!0}),n}}catch(t){Ft.error("Failed to fetch profile",t)}return null}))}(t);if(n&&(null==n?void 0:n.profileId)){const r=JSON.stringify(n);r!==e&&(Ft.debug("getGalactusUserProfile: Profile updated from Galactus",n),ao.dispatch(Kr({beaconId:t,profile:n})),function(t,e){Q(this,void 0,void 0,(function*(){const n=!!ie()&&(yield function(t,e){return Q(this,void 0,void 0,(function*(){const n=yield Zt(),r=te(t),o=Object.assign(Object.assign({},e),{apiVersion:rt});return(yield null==n?void 0:n.put(Yt,o,r))===r}))}(t,e)),r=!!oe()&&(yield function(t,e){return Q(this,void 0,void 0,(function*(){try{localStorage.setItem(ct(t),JSON.stringify(Object.assign(Object.assign({},e),{apiVersion:rt})))}catch(t){return!1}return!0}))}(t,e)),o=n||r;return o||Ft.error("Failed to cache Galactus response",t,e),o}))}(t,n),e=r)}}catch(t){Ft.error("Fail to fetch data from Galactus",t),Zo(n)}}))))}))}(e)))),n}))}function ri(t,e){var n,r,o,i;return co()([].concat(Object.keys(null!==(o=null===(r=null===(n=null==e?void 0:e.namespaces)||void 0===n?void 0:n.adTags)||void 0===r?void 0:r.pform)&&void 0!==o?o:[]),Object.keys(null!==(i=null==t?void 0:t.pform)&&void 0!==i?i:[])).filter(Boolean))}function oi(t){var e,n,r;return(null!==(r=null===(n=null===(e=null==t?void 0:t.namespaces)||void 0===e?void 0:e.devices)||void 0===n?void 0:n.set)&&void 0!==r?r:[]).map((t=>({type:ii(t),platform:ai(t),browser:si(t)})))}function ii(t){return t.type.toLowerCase().replace("unknown","other")}function ai(t){const e=t.os.toLowerCase(),n=t.make.toLowerCase();let r="other";return e.includes("android")&&(r="android"),n.includes("apple")&&(r="apple"),r}function si(t){return t.browser.toLowerCase().replace("unknown","other")}function ci(t){var e,n,r,o;const i=null!==(r=null===(n=null===(e=null==t?void 0:t.namespaces)||void 0===e?void 0:e.locations)||void 0===n?void 0:n.set)&&void 0!==r?r:[],a=null===(o=null!=(s=function(t){try{var e,n=decodeURIComponent(null!=(e=A("Geo"))?e:"{}");return n?JSON.parse(n):void 0}catch(t){return}}())?s:{})||void 0===o?void 0:o.country;var s;return co()([].concat(i.map((t=>t.country)),[a]).filter(Boolean).map((t=>t.toUpperCase())))}function ui(t){var e,n,r,o,i,a,s,c;const u=null!==(r=null===(n=null===(e=null==t?void 0:t.namespaces)||void 0===e?void 0:e.languages)||void 0===n?void 0:n.contentLanguages)&&void 0!==r?r:[],l=null!==(a=null===(i=null===(o=null==t?void 0:t.namespaces)||void 0===o?void 0:o.languages)||void 0===i?void 0:i.acceptLanguages)&&void 0!==a?a:[],d=[null===(s=ko(ao.getState()))||void 0===s?void 0:s.pageLanguage,null===(c=Do(ao.getState()))||void 0===c?void 0:c.lang],f=[window.navigator.language.split("-")[0]],p=Mo(ao.getState());return co()([].concat(u.map((t=>t.languageCode)),l.map((t=>t.languageCode)),p.map((t=>null==t?void 0:t.pageLanguage)),d,f).filter(Boolean).map((t=>t.toLowerCase())))}var li,di,fi,pi,vi,gi;function hi(t){return 1===t?pi.FIRST_TIME_VISITOR:t<=5?pi.RETURNING_VISITOR:pi.FREQUENT_VISITOR}function yi(t){const e=Mo(ao.getState()).length;if(e>0)return hi(e);const n=[];return Object.values(t).forEach((t=>{n.push(Math.max.apply(null,Object.values(t)))})),hi(Math.max.apply(null,n))}function bi(t){return[yi(t)]}function mi(t,e){var n,r,o,i;return co()([].concat(Object.keys(null!==(o=null===(r=null===(n=null==e?void 0:e.namespaces)||void 0===n?void 0:n.adTags)||void 0===r?void 0:r.tv)&&void 0!==o?o:[]),Object.keys(null!==(i=null==t?void 0:t.tv)&&void 0!==i?i:[])).filter(Boolean))}function wi(t){if(t){const{media:e,gnre:n,theme:r}=t;return co()([].concat(e?Object.keys(e):void 0,n?Object.keys(n):void 0,r?Object.keys(r):void 0).filter(Boolean))}return[]}!function(t){t.DELAYED="silver-surfer:delayed",t.READY="silver-surfer:ready"}(li||(li={})),(gi=di||(di={})).LOADED="loaded",gi.COLLAPSED="collapsed",gi.BLOCKED="blocked",(vi=fi||(fi={})).WIKI_CONTENT="wiki content",vi.FEATURED_VIDEO="featured video",vi.DISCUSSIONS="discussions",vi.ADS="ads",function(t){t.FIRST_TIME_VISITOR="1st time visitor",t.RETURNING_VISITOR="returning visitor",t.FREQUENT_VISITOR="frequent visitor"}(pi||(pi={})),ue("pathfinder",Ct);const Si=le("pathfinder",Ct);pe(Si);const Oi=ve(Si),_i="active-data-management-service";var Ei=n(1609),Ii=n.n(Ei);const xi=6e4;let Ai=0;function ji(){var t,e;return Q(this,void 0,void 0,(function*(){const n=yield function(){return Q(this,void 0,void 0,(function*(){const t=j();let e=ot;return t?(e=yield ni(t),Xo.loaded({category:"galactus-user-profile-loaded",label:"galactus-user-profile-loaded |  "+((null==e?void 0:e.profileId)?"true":"false")})):Xo.loaded({category:"galactus-user-profile-failed-loaded",label:"no-beacon"}),e}))}(),r=yield function(){return Q(this,void 0,void 0,(function*(){const t=qo(ao.getState());if(!Ii()(t)&&Date.now()-Ai<xi)return t;const e=yield function(){return Q(this,void 0,void 0,(function*(){if(Ve())return{};try{yield ze()}catch(t){return Ft.debug("Consent not given, cannot contact active-data-management-system"),{}}try{const t=yield ge(`${_i}/profiles?cb=${Date.now()}`);if(200===t.status){const e=yield t.json();return Ft.debug("active-data-management-system API response",e),e}}catch(t){Ft.error("Failed to fetch active-data",t)}return{}}))}();return Ft.debug("getActiveData: read from ADMS",e),Ai=Date.now(),ao.dispatch(qr({activeData:e})),e}))}(),o=function(t){var e,n,r;let o=null!==(n=null===(e=null==t?void 0:t.namespaces)||void 0===e?void 0:e.adTags)&&void 0!==n?n:{};if(!go(o)){Ft.debug("getUserProfile: Galactus AdTags are empty, fallback to history");const t=null!==(r=Mo(ao.getState()).map((({adTags:t})=>t)))&&void 0!==r?r:[];i=t.filter(Boolean).map(x),a={},i.forEach((function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r,o=n[e],i=o[0],s=o[1],c=i,u=null!=(r=a[c])?r:{};if(s)for(var l=0,d=Object.entries(s);l<d.length;l++){var f,p=d[l],v=p[0],g=p[1];u[v]=(null!=(f=u[v])?f:0)+g}a[c]=u}})),o=a}var i,a;return go(o)&&(Ft.debug("getUserProfile: History is empty, fallback to current page"),o=x(ko(ao.getState()).adTags)),o}(n),i={beaconId:j(),gender:Object.keys(null!==(t=null==o?void 0:o.sex)&&void 0!==t?t:{}),affiliation:bi(o),interactions:$o(ao.getState()),ageBrackets:Object.keys(null!==(e=null==o?void 0:o.age)&&void 0!==e?e:{}),devices:oi(n),language:ui(n),country:ci(n),interests:wi(o),consoles:ri(o,n),streaming:mi(o,n),adTags:o,activeData:r,visitedProducts:Ho(ao.getState())};return Ft.debug("getUserProfile: Profile complete",i),i}))}function Di(t){if(Tt()&&Ft.debug("AdEngine event",t),(null==t?void 0:t.name)&&(null==t?void 0:t.state)){let e;"collapse"===t.state&&(e=di.COLLAPSED),"success"===t.state&&(e=di.LOADED),"blocked"===t.state&&(e=di.BLOCKED),e&&ao.dispatch(Br({name:t.name,status:e}))}}function ki(){const t=Le();t&&(Ft.debug("Start listening for Ad events"),t.on(Be,Di),t.on(Me,Di),t.on(Ue,Di),t.on(Fe,Di))}function Pi(){const t=k();return!t.isUnknown&&(Ft.debug("Updating user context from window",t.toTransport()),ao.dispatch(Tr(t)),t)}function Ci(){!function(){const t=k();t.isUnknown?(Ft.debug("Reading user context from window failed, trying fallback..."),function(){return I.apply(this,arguments)}().then((t=>{Pi()||t.isUnknown||(Ft.debug("Reading user context from fallback",t.toTransport()),ao.dispatch(Tr(t)))})).catch((t=>{Pi()||Ft.error("Reading user context from fallback failed",t)}))):(Ft.debug("Reading user context from window",t.toTransport()),ao.dispatch(Tr(t)));const e=D();Ft.debug("Reading page context from window",e.toTransport()),ao.dispatch(Lr(e))}(),hr(ki)}function Ri(){let t=ko(ao.getState());t.isValid||(t=D(),t.isValid&&(Ft.debug("Updated page context from window",t.toTransport()),ao.dispatch(Lr(t))));let e=Do(ao.getState());if(e.isUnknown){const t=Pi();t&&(e=t)}return{current:t,pages:Mo(ao.getState()),features:{adBlockDetected:Po(ao.getState())},slots:Co(ao.getState()),user:e}}function Ni(t){return Q(this,void 0,void 0,(function*(){if(!function(t){return!(!t||"string"!=typeof t.name||(null==t?void 0:t.onReboot)&&"function"!=typeof t.onReboot)}(t))return Ft.debug("registerClient: Invalid client",t),Xo({label:"client-registration",action:"invalid",client:t}),null;const e=_o(ao.getState());if(function(t,e){var n;return null!==(n=null==e?void 0:e.findIndex((e=>wo(e,t))))&&void 0!==n?n:-1}(t,e)>-1)return Ft.debug("registerClient: Already registered client",t),Xo({label:"client-registration",action:"already-registered",client:t}),null;const n=function(t){return Object.assign(Object.assign({},t),{time:Date.now(),token:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),ssVersion:Ct})}(t);return ao.dispatch(Pr(n)),Ft.debug("registerClient: Client registered",n),n.token}))}const Ti=Ct;function Li(t,e){return{type:t,timestamp:Date.now(),payload:e,xv:Ti}}var Bi;!function(t){t.PageviewRequest="SilverSurfer::Pageview::Request",t.PageviewResponse="SilverSurfer::Pageview::Response",t.AddActionRequest="SilverSurfer::AddAction::Request",t.AddActionResponse="SilverSurfer::AddAction::Response",t.AddInteractionRequest="SilverSurfer::AddInteraction::Request",t.AddInteractionResponse="SilverSurfer::AddInteraction::Response",t.HistorySizeResponse="SilverSurfer::HistorySize::Response",t.HistoryPagesResponse="SilverSurfer::HistoryPages::Response",t.HistoryActionsResponse="SilverSurfer::HistoryActions::Response",t.HistoryInteractionsResponse="SilverSurfer::HistoryInteractions::Response"}(Bi||(Bi={}));class Mi{constructor(t,e,n,r){this._sending=!1,this._queue=[],this._options={},this._onMessageCallback=n,this._origin=t,this._options=r,this._initialize(e)}get status(){return this._status}_log(t,...e){var n;(null===(n=this._options)||void 0===n?void 0:n.debug)&&console.log(`CrossDomainSender::${t}`,...e)}_initialize(t){this._log("_initialize"),this._status=zr.Initializing;const e=document.createElement("iframe");e.style.display="none",e.sandbox="allow-same-origin allow-scripts",e.addEventListener("load",this._onIframeLoad.bind(this)),e.addEventListener("error",this._onIframeLoadError.bind(this)),e.src=t,document.body.appendChild(e),this._iframe=e}_onIframeLoadError(t){var e;this._log("_onIframeLoadError",t.error),this._status=zr.Off,"function"==typeof(null===(e=this._options)||void 0===e?void 0:e.onIframeError)&&this._options.onIframeError(t)}_onIframeLoad(){this._log("_onIframeLoad");const t=new MessageChannel;t.port1.onmessage=this._onMessage.bind(this),this._sendMessage(Li(Fr.Request),[t.port2])}_onMessage(t){var e;"string"==typeof(e=t.data).xv&&"number"==typeof e.timestamp&&e.timestamp>0&&"string"==typeof e.type?(this._log("_onMessage",t),t.data.type===Fr.Response&&(this._status=zr.Ready),"function"==typeof this._onMessageCallback&&this._onMessageCallback(t.data)):this._log("_onMessage - invalid message",t)}_sendMessage(t,e){this._log("_sendMessage",t),this._iframe.contentWindow.postMessage(t,this._origin,e)}_flushQueue(){if(this._status===zr.Ready&&!this._sending){let t;for(this._sending=!0;t=this._queue.shift(),void 0!==t;)this._sendMessage(t);this._sending=!1}}send(t){this._queue.push(t),this._flushQueue()}}function Ui(){return""!==window.location.port&&"80"!==window.location.port?null:Rt?`https://${Sr}`:Pt()&&Nt("ss_force_crossdomain=true")?`${window.location.protocol}//${window.location.host}`:null}let Fi;const zi=Pt()?500:14e3;function Vi(){try{if(!Fi){if(Ao(ao.getState()))return Ft.debug("Cross domain connection disabled (on purpose)"),void ao.dispatch(Jr({status:zr.Off,statusErrorMessage:"disabled"}));if(!Ui())return Ft.debug("Cross domain connection disabled (unsupported origin)"),void ao.dispatch(Jr({status:zr.Off,statusErrorMessage:"incorrect-origin"}));Ft.debug("Initializing cross domain connection"),Fi=new Mi(Ui(),function(){let t=window.location.search;return Io(ao.getState())&&(t+=`${t.length?"&":"?"}cb=${Date.now()}`),`${Ui()}/silver-surfer.html${t}`}(),$i,{debug:Io(ao.getState()),onIframeError:t=>{ao.dispatch(Jr({status:zr.Off,statusErrorMessage:"iframe-error"})),Ft.error("Cross domain frame error")}}),setTimeout((()=>{ao.dispatch(Jr({status:zr.Off,statusErrorMessage:"timeout"})),Ft.error("Cross domain timeout")}),zi)}}catch(t){Ft.error("Cross domain error thrown",t),ao.dispatch(Jr({status:zr.Off,statusErrorMessage:"unknown"}))}}function $i(t){switch(t.type){case Fr.Response:return ao.dispatch(Jr({status:zr.Ready})),void Ft.debug("Cross domain connected");case Bi.HistorySizeResponse:{const e=t.payload;return ao.dispatch(Zr(e)),void Ft.debug("Cross domain sent storage size",e)}case Bi.HistoryInteractionsResponse:{const e=t.payload;return ao.dispatch(no(e)),void Ft.debug("Cross domain sent history interactions",e)}case Bi.HistoryPagesResponse:{const e=t.payload;return ao.dispatch(to(e)),void Ft.debug("Cross domain sent history pages",e)}case Bi.HistoryActionsResponse:{const e=t.payload;return ao.dispatch(eo(e)),void Ft.debug("Cross domain sent history actions",e)}case Bi.PageviewResponse:return void Ft.debug("Cross domain pageview ack");case Bi.AddActionResponse:return void Ft.debug("Cross domain action ack");case Bi.AddInteractionResponse:return void Ft.debug("Cross domain interaction ack");default:return void Ft.error("Unknown message type",t)}}function Hi(t){return Q(this,void 0,void 0,(function*(){Ft.debug("New interaction",t),ao.dispatch(Qr(t)),function(t){Fi&&Fi.status===zr.Ready?(Ft.debug("Sending cross domain interaction",t),Fi.send(function(t){return Li(Bi.AddInteractionRequest,t)}(t))):Ft.debug("Cross domain not ready on interaction")}(t)}))}const Wi=function(t){let e=0;const n="function"==typeof(null==t?void 0:t.onResolve)?t.onResolve:()=>{},r="function"==typeof(null==t?void 0:t.onReject)?t.onReject:()=>{};return()=>new Promise(((o,i)=>{const a=setInterval((()=>{t.eventCheck()&&(clearInterval(a),o(n())),t.intervalTime*e>t.maxWaitTime&&(clearInterval(a),i(r())),e++}),t.intervalTime)}))}({eventCheck:()=>Bo(ao.getState()),intervalTime:100,maxWaitTime:5e3,onReject:()=>Uo(ao.getState()),onResolve:()=>Uo(ao.getState())});function Gi(){return Q(this,void 0,void 0,(function*(){try{return yield Wi()}catch(t){if(Array.isArray(t))return t;Ft.error("Error getting actions",t)}return[]}))}function Ki(t){const e=Eo(t)(ao.getState());if(!e)throw new Error("Incorrect token");return e}function qi(t,e){return Q(this,void 0,void 0,(function*(){const n=Ki(t);return function(t,e,n){let r=t.filter((t=>wo(t.client,e))).map((t=>t.action));return"string"==typeof n&&n.length>0&&(r=r.filter((t=>t.type===n))),r}(yield Gi(),n,e)}))}function Ji(t){return Q(this,void 0,void 0,(function*(){return Pt()||Ki(t),yield Gi()}))}function Yi(t,e,n,r){return Q(this,void 0,void 0,(function*(){const o=function(t,e,n,r){return{client:mo(t),action:{time:Date.now(),name:e,type:n,payload:r}}}(Ki(t),e,n,r);Ft.debug("New action",o),ao.dispatch(Xr(o)),function(t){Fi&&Fi.status===zr.Ready?(Ft.debug("Sending cross domain action",t),Fi.send(function(t){return Li(Bi.AddActionRequest,t)}(t))):Ft.debug("Cross domain not ready on action")}(o)}))}var Xi;!function(t){t.ADD="add",t.CLICK="click",t.CLOSE="close",t.CONFIRM="confirm",t.CREATE="create",t.DISABLE="disable",t.ENABLE="enable",t.ERROR="error",t.HOVER="hover",t.IMPRESSION="impression",t.IDENTITY="identity",t.KEYPRESS="keypress",t.NO_IMPRESSION="no-impression",t.OPEN="open",t.PLAY_VIDEO="play-video",t.QUIZ="quiz",t.REACTION="reaction",t.REMOVE="remove",t.SELECT="select",t.SHARE="share",t.SUBMIT="submit",t.SUCCESS="success",t.SWIPE="swipe",t.VIEW="view",t.REACTION_COUNT="reaction-count",t.HEALTH="health",t.HIGHLIGHT="highlight",t.MYFANDOM="myfandom",t.CALENDAR_EVENTS="calendarevents",t.COLLECTIONITEM="collectionitem"}(Xi||(Xi={}));var Qi=n(8446),Zi=n.n(Qi);function ta(t,e,n){let r;function o(){const o=e(t.getState());Zi()(o,r)||(r=o,n(r))}const i=t.subscribe(o);return o(),i}function ea(){return Q(this,void 0,void 0,(function*(){var t,e;t=Hr(ko(ao.getState())),Fi&&Fi.status===zr.Ready?(Ft.debug("Tracking cross domain page",t),Fi.send((e=t,Li(Bi.PageviewRequest,e)))):Ft.debug("Cross domain not ready on pageview")}))}const na="fan_visited_wikis";function ra(){return Q(this,void 0,void 0,(function*(){const t=ko(ao.getState()),e=Hr(t);Ft.debug("Tracking local page",e),ao.dispatch(Yr(e));try{if(yield ze(),![v.MEDIAWIKI,v.DISCUSSIONS].includes(t.product))return void Ft.debug("Fallback for visited wikis DISABLED - not MW or Discussions",t.product);let e=(function(t){const e=document.cookie.match(RegExp("(?:^|;\\s*)"+function(t){return t.replace(/([.*+?\^$(){}|\[\]\/\\])/g,"\\$1")}(t)+"=([^;]*)"));return e?e[1]:null}(na)||"").split(",");e.includes(t.productId)||(e=e.slice(-50),e.push(t.productId));const n=31536e3;document.cookie=`${na}=${e.filter(Boolean).join(",")};path=/;domain=.fandom.com;max-age=${n};SameSite=None;Secure`,Ft.debug("Fallback for visited wikis enabled, new values",e)}catch(t){Ft.debug("Consent not given, fallback cookie not set",t)}}))}function oa(t,e){const n=new CustomEvent(t,{detail:e});window.dispatchEvent(n)}const ia="ss_galactus_enabled";function aa(){return document.cookie.includes(ia)}let sa=null;function ca(){return Q(this,void 0,void 0,(function*(){const t=Oo(ao.getState()),e=So(ao.getState());if(!t&&!e)return Ft.error("trackPageview cannot be triggered until SilverSurfer is bootstrapped"),!1;const n=S.fromWindow();return function(t,e){return t instanceof S&&e instanceof S&&t.product===e.product&&t.productId===e.productId&&t.page===e.page&&t.pageId===e.pageId}(n,sa)?(Ft.info("Page context did not change, skipping pageview"),!1):(Ft.debug("Firing manual pageview"),Ci(),ra().catch(Ft.error),e&&(To(ao.getState())&&ea().catch(Ft.error),ao.dispatch(Ar.reboot())),t&&ao.dispatch(Ar.starting()),sa=n,!0)}))}const ua={trackPageview:ca,getContext:Ri,registerClient:Ni,getUserProfile:ji,addInteraction:Hi,ACTION:Xi,addActiveDataAction:pa,addAction:Yi,getAllActions:Ji,getActions:qi,getGalactusUserProfile:ni,isCrossdomainFinished:ma,isCrossdomainDisabled:wa,isInitialized:Sa,isReady:Oa,getVersionHash:_a},la=Xi;function da(){return ca()}function fa(t){return Ni(t)}function pa(t,e,n,r){return function(t,e,n,r){return Q(this,void 0,void 0,(function*(){const o={time:Date.now(),name:e,type:n,payload:Object.assign(Object.assign({},r||{}),{_type:n})};(yield function(t){return Q(this,void 0,void 0,(function*(){if(Ve())return!0;try{if(200===(yield Oi(`${_i}/validate/`,Object.assign({},t))).status)return!0}catch(t){Ft.error("Failed to post active data action",t)}return!1}))}(o))?yield Yi(t,e,n,r):Ft.error("Error posting active data action",o)}))}(t,e,n,r)}function va(t,e,n,r){return Yi(t,e,n,r)}function ga(t,e){return qi(t,e)}function ha(t){return Ji(t)}function ya(){return ji()}function ba(t){return Hi(t)}function ma(){return Wo(ao.getState())}function wa(){return Go(ao.getState())}function Sa(){return So(ao.getState())}function Oa(){return Sa()&&(ma()||wa())}function _a(){return Ct}function Ea(t){return ni(t||j())}function Ia(){return Ri()}try{Y(b.SS_PRE_BOOTSTRAP),ao.getState().App.state===Er.New&&(Ft.debug(`Booting SilverSurfer #${Ct}`,ao.getState().App.config),function(){const t=ta(ao,Jo,(e=>Q(this,void 0,void 0,(function*(){e&&(t(),Ft.debug("Booted, running post-boot actions"),ta(ao,Mo,(t=>{(function(t){return Q(this,void 0,void 0,(function*(){const e=!!ie()&&(yield function(t){return Q(this,void 0,void 0,(function*(){const e=yield Zt(),n=null==e?void 0:e.transaction(Gt,"readwrite",{durability:"strict"});if(!(null==n?void 0:n.store))return!1;yield n.store.clear();let r=!0;return tt()(t,ne[ee.IndexedDB]).forEach((t=>Q(this,void 0,void 0,(function*(){const{id:e}=t,o=X(t,["id"]),i=yield n.store.put(o,e);r&&(r=i===e)})))),yield n.done,r}))}(t)),n=!!oe()&&(yield function(t){return Q(this,void 0,void 0,(function*(){try{localStorage.setItem(it,JSON.stringify(tt()(t,ne[ee.LocalStorage])))}catch(t){return!1}return!0}))}(t)),r=e||n;return r?Ft.debug("Local pages updated from cross domain"):Ft.error("Failed to update local pages"),r}))})(t.map(Hr)).then((()=>{Ft.debug("LocalStorage pages saved",t)}))})),ta(ao,Uo,(t=>{(function(t){return Q(this,void 0,void 0,(function*(){const e=!!ie()&&(yield function(t){return Q(this,void 0,void 0,(function*(){const e=yield Zt(),n=null==e?void 0:e.transaction(Kt,"readwrite",{durability:"strict"});if(!(null==n?void 0:n.store))return!1;yield n.store.clear();let r=!0;return tt()(t,re[ee.IndexedDB]).forEach((t=>Q(this,void 0,void 0,(function*(){const e=yield n.store.put(t);r&&(r=!!e)})))),yield n.done,r}))}(t)),n=!!oe()&&(yield function(t){return Q(this,void 0,void 0,(function*(){try{localStorage.setItem(at,JSON.stringify(tt()(t,re[ee.LocalStorage])))}catch(t){return!1}return!0}))}(t)),r=e||n;return r?Ft.debug("Local actions updated from cross domain"):Ft.error("Failed to update local actions"),r}))})(t).then((()=>{Ft.debug("LocalStorage actions saved",t)}))})),ta(ao,Vo,(t=>{ae(t).then((()=>{Ft.debug("LocalStorage interactions saved",t)}))})),ra().catch(Ft.error),ji().catch(Ft.error),(ao.getState().App.config.sendTracking||aa())&&(aa()||function(){const t=new Date;t.setMonth(t.getMonth()+12),document.cookie=ia+"=true;expires="+t+";domain=.fandom.com;path=/"}()),ao.dispatch(Ar.ready()),Y(b.SS_SDK_READY),oa(li.READY),hr(Vi))}))))}(),function(){const t=ta(ao,No,(e=>{e&&(Y(b.SS_CROSS_DOMAIN_READY),t(),Ft.debug("Cross domain initialized:",Ro(ao.getState()),ao.getState().BrowserStorage.crossdomain.statusErrorMessage),jo(ao.getState())||ea().catch(Ft.error))})),e=ta(ao,Wo,(t=>{t&&(e(),Ft.debug("Cross domain finished"))}))}(),function(){return Q(this,void 0,void 0,(function*(){const t=yield function(){return Q(this,void 0,void 0,(function*(){return ie()?yield function(){var t;return Q(this,void 0,void 0,(function*(){const e=yield Zt(),n=null!==(t=yield null==e?void 0:e.getAllKeys(Gt))&&void 0!==t?t:[],r=yield null==e?void 0:e.getAll(Gt);return n.map(((t,e)=>Object.assign({id:t},r[e])))}))}():oe()?yield lt():[]}))}(),e=yield function(){return Q(this,void 0,void 0,(function*(){return ie()?yield function(){return Q(this,void 0,void 0,(function*(){const t=yield Zt();return yield null==t?void 0:t.getAll(Kt)}))}():oe()?yield dt():[]}))}(),n=yield function(){return Q(this,void 0,void 0,(function*(){return ie()?yield function(){var t;return Q(this,void 0,void 0,(function*(){const e=yield Zt();return null!==(t=yield null==e?void 0:e.get(qt,Jt))&&void 0!==t?t:{}}))}():oe()?yield ut():{}}))}(),r={interactions:n,actions:e,pages:t};Ft.debug("Read from local domain",r),ao.dispatch(ro(r));const o=yield se();ao.dispatch(oo(o));const i=ho(t)+ho(e)+ho([n]);$t("sdk-read-pages",t.length,.02,ho(t).toString()),$t("sdk-total-objects",i,.02,e.length.toString()),$t("sdk-storage-size",o.indexedDBSize,.02,o.localStorageSize.toString());try{if(navigator&&navigator.storage&&navigator.storage.estimate){const t=yield window.navigator.storage.estimate(),e=t.quota;$t("sdk-navigator-estimate",t.usage,.02,e.toString()),t.usageDetails&&t.usageDetails.indexedDB&&$t("sdk-navigator-estimate-indexeddb",t.usageDetails.indexedDB,.02)}}catch(t){}}))}().catch(Ft.error),jo(ao.getState())?(Ft.info("Manual pageview is enabled"),ao.dispatch(Ar.delayed()),oa(li.DELAYED)):(Ci(),ra().catch(Ft.error),ao.dispatch(Ar.starting())))}catch(Ge){Ft.error("SilverSurfer bootstrap failed",Ge)}const xa=ua})(),r})()));
//# sourceMappingURL=sdk.js.map